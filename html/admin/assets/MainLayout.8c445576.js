import{Q}from"./QCardSection.ac25062c.js";import{R as $,Q as d}from"./QBtn.c839cf37.js";import{Q as L}from"./QCard.e6e0f110.js";import{Q as B}from"./QDialog.cccd1c23.js";import{Q as M,a as x}from"./QHeader.ec9da048.js";import{Q as V}from"./QSpace.327da2f0.js";import{Q as h}from"./QIcon.3c266a4f.js";import{Q as U}from"./QBadge.3cf4f3a4.js";import{Q as q}from"./QAvatar.1ed8ecf9.js";import{Q as O}from"./QToolbar.26996b87.js";import{Q as z}from"./QImg.77a3afdd.js";import{Q as n,a as _}from"./QItem.37ee45a0.js";import{Q as c}from"./QItemLabel.e5b31ea7.js";import{Q as D}from"./QList.1027218a.js";import{Q as F,a as N}from"./QDrawer.3a5685c2.js";import{Q as P,a as T}from"./QLayout.b8657fe5.js";import{d as I,_ as y,k as s,x as f,m as t,f as e,t as k,u as l,v as u,l as b,F as C,q as j,J as E,p as m,P as R}from"./index.18f49e8a.js";import{a as S}from"./axios.a3196689.js";import{l as H}from"./index.5c50d63d.js";import"./render.71945eb8.js";import"./QSpinner.017c4684.js";import"./use-size.45c64be6.js";import"./dom.83014615.js";import"./use-router-link.c448a231.js";import"./vm.bd5b438f.js";import"./use-dark.d8789839.js";import"./use-prevent-scroll.d7e78d65.js";import"./scroll.c3c2c8a7.js";import"./use-timeout.2cd09270.js";import"./use-tick.b999d2c1.js";import"./use-portal.fc838186.js";import"./focus-manager.7cc6c8df.js";import"./QResizeObserver.d71df60e.js";import"./QSlideTransition.5152e137.js";import"./QSeparator.be958997.js";import"./use-id.6e68b60f.js";import"./uid.937d8ee7.js";import"./TouchPan.fe5356a6.js";import"./touch.9135741d.js";import"./selection.b4b43bf8.js";import"./format.2cae61da.js";import"./QScrollObserver.c2ef3cd2.js";const W=I({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});function J(a,o,v,w,r,g){return s(),f(_,{clickable:"",tag:"a",target:"_blank",href:a.link},{default:t(()=>[a.icon?(s(),f(n,{key:0,avatar:""},{default:t(()=>[e(h,{name:a.icon},null,8,["name"])]),_:1})):k("",!0),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l(u(a.title),1)]),_:1}),e(c,{caption:""},{default:t(()=>[l(u(a.caption),1)]),_:1})]),_:1})]),_:1},8,["href"])}var G=y(W,[["render",J]]);const K=I({name:"Messages",setup(){return{messages:[{id:5,name:"Pratik Patel",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://avatars2.githubusercontent.com/u/34883558?s=400&v=4",time:"10:42 PM"},{id:6,name:"Winfield Stapforth",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/img/avatar6.jpg",time:"11:17 AM"},{id:1,name:"Boy",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/img/boy-avatar.png",time:"5:17 AM"},{id:2,name:"Jeff Galbraith",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/team/jeff_galbraith.jpg",time:"5:17 AM"},{id:3,name:"Razvan Stoenescu",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/team/razvan_stoenescu.jpeg",time:"5:17 AM"}]}}}),X=["src"];function Y(a,o,v,w,r,g){return s(),b("div",null,[(s(!0),b(C,null,j(a.messages,i=>E((s(),f(_,{style:{"max-width":"420px"},key:i.id,clickable:""},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(q,null,{default:t(()=>[m("img",{src:i.avatar},null,8,X)]),_:2},1024)]),_:2},1024),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l(u(i.name),1)]),_:2},1024),e(c,{caption:"",lines:"1"},{default:t(()=>[l(u(i.msg),1)]),_:2},1024)]),_:2},1024),e(n,{side:""},{default:t(()=>[l(u(i.time),1)]),_:2},1024)]),_:2},1024)),[[$]])),128))])}var Z=y(K,[["render",Y]]),ee="/assets/SSS.19084230.png";const A="http://93.127.167.211:8090/api",te={name:"MainLayout",components:{EssentialLink:G,Messages:Z},created(){const a="http://93.127.167.211:5500";this.socket=H(a),this.socket.on("receiverTriggerness",(o,v)=>{o=="OpenDialog"&&(this.deleteDialog=!0),o=="CloseDialog"&&(this.deleteDialog=!1),o=="AutomaticLogout"&&this.handleLogout(),o=="WeHaveANewSignUpAccount"&&this.fetchUserData()})},data(){return{leftDrawerOpen:!1,first_name:"",account_request:null,user:null,pollingInterval:null,deleteDialog:!1}},computed:{drawerStatus(){return this.leftDrawerOpen?"Open":"Closed"}},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},handleLogout(){localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),this.$router.push("/login")},async fetchUserData(){try{const a=localStorage.getItem("access_token"),o=await S.get(`${A}/shortpolling`,{headers:{Authorization:`Bearer ${a}`}});this.user=o.data,this.first_name=this.user.first_name}catch(a){console.error("Failed to fetch user data:",a)}this.displayCountAccept()},async displayCountAccept(){try{const a=localStorage.getItem("access_token"),o=await S.get(`${A}/counter/status-one`,{headers:{Authorization:`Bearer ${a}`}});this.account_request=o.data}catch(a){console.error("Failed to fetch user data:",a)}}},mounted(){this.fetchUserData()},beforeUnmount(){this.pollingInterval&&clearInterval(this.pollingInterval)},watch:{}},ae=m("div",{class:"text-h6"},"Socket.io",-1),oe=m("p",null,"Connected and Working Successfully",-1),re={class:"q-gutter-sm row items-center no-wrap"},ne=m("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),le={style:{padding:"15px","background-color":"#fff"}};function se(a,o,v,w,r,g){const i=R("router-view");return s(),b(C,null,[e(B,{modelValue:r.deleteDialog,"onUpdate:modelValue":o[1]||(o[1]=p=>r.deleteDialog=p)},{default:t(()=>[e(L,null,{default:t(()=>[e(Q,{class:"header-format-w"},{default:t(()=>[ae,oe]),_:1}),e(Q,null,{default:t(()=>[e(d,{label:"ok",onClick:o[0]||(o[0]=p=>r.deleteDialog=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(P,{view:"lHh Lpr lFf"},{default:t(()=>[e(M,{elevated:""},{default:t(()=>[e(O,null,{default:t(()=>[e(d,{flat:"",dense:"",round:"",onClick:g.toggleLeftDrawer,icon:"menu","aria-label":"Menu"},null,8,["onClick"]),e(x,null,{default:t(()=>[l(u(this.first_name),1)]),_:1}),e(V),m("div",re,[a.$q.screen.gt.sm?(s(),f(d,{key:0,round:"",dense:"",flat:"",color:"white",icon:a.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",onClick:o[2]||(o[2]=p=>a.$q.fullscreen.toggle())},null,8,["icon"])):k("",!0),e(d,{round:"",dense:"",flat:"",color:"white",to:"/RequestAccounts"},{default:t(()=>[e(h,{name:"person"}),r.account_request?(s(),f(U,{key:0,color:"red","text-color":"white",floating:""},{default:t(()=>[l(u(r.account_request),1)]),_:1})):k("",!0)]),_:1}),e(d,{round:"",flat:""},{default:t(()=>[e(q,{size:"26px"},{default:t(()=>[ne]),_:1})]),_:1}),e(d,{round:"",dense:"",flat:"",color:"white",icon:"logout",onClick:g.handleLogout},null,8,["onClick"])])]),_:1})]),_:1}),e(F,{modelValue:r.leftDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=p=>r.leftDrawerOpen=p),"show-if-above":"",bordered:"",class:"bg-primary text-white"},{default:t(()=>[e(D,null,{default:t(()=>[m("div",le,[e(z,{src:ee})]),e(N,{icon:"account_circle",label:"Accounts"},{default:t(()=>[e(D,{class:"q-pl-lg"},{default:t(()=>[e(_,{to:"/AllAccounts","active-class":"q-item-no-link-highlighting"},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(h,{name:"list"})]),_:1}),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l("All Accounts")]),_:1})]),_:1})]),_:1}),e(_,{to:"/SchoolAccounts","active-class":"q-item-no-link-highlighting"},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(h,{name:"person"})]),_:1}),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l("Schools Accounts")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(T,{class:"bg-grey-2"},{default:t(()=>[e(i)]),_:1})]),_:1})],64)}var Ke=y(te,[["render",se]]);export{Ke as default};
