import{Q as p}from"./QCardSection.00c79619.js";import{Q as l}from"./QInput.61b433c6.js";import{Q as u}from"./QBtn.725545ea.js";import{Q as b}from"./QForm.09e76459.js";import{Q as f}from"./QBanner.f3265566.js";import{Q as w}from"./QCard.4f2f928a.js";import{Q as k}from"./QPage.a46d10af.js";import{Q as V,a as v}from"./QLayout.f2fd5456.js";import{_ as Q,j as q,k as o,v as d,m as a,d as t,y as g,av as S,p as i,l as h,t as c,u as n,s as y,a4 as C,a5 as _}from"./index.0f230e14.js";import{a as $}from"./axios.ab682c6b.js";import"./render.58209ae1.js";import"./use-key-composition.0d667f1b.js";import"./QIcon.a92d8186.js";import"./use-size.38e17cf2.js";import"./QSpinner.5846cff1.js";import"./uid.937d8ee7.js";import"./use-dark.1601360c.js";import"./focus-manager.7cc6c8df.js";import"./private.use-form.7baad7be.js";import"./dom.d9e3a984.js";import"./use-router-link.b39cd90f.js";import"./vm.bd5b438f.js";import"./scroll.ec30b58f.js";import"./QResizeObserver.b5bcee06.js";const B="http://93.127.167.211:8090/api",z=q({name:"ResetPasswordPage",data(){return{email:"",token:"",password:"",password_confirmation:"",message:"",success:!1,passwordVisible:!1}},computed:{strengthMessage(){return this.passwordStrength(this.password)},strengthColor(){const e=this.strengthMessage;return e==="Strong"?"green":e==="Weak"?"orange":"red"}},mounted(){const e=new URLSearchParams(window.location.search);this.email=e.get("email")||"",this.token=e.get("token")||""},methods:{async resetPassword(){try{const e=await $.post(`${B}/reset-password`,{email:this.email,token:this.token,password:this.password,password_confirmation:this.password_confirmation});this.message=e.data.message,this.success=!0,alert(this.message),alert("Please Login Again"),this.$router.push("/login")}catch(e){e.response?(this.message=e.response.data.message,this.success=!1):(this.message="An error occurred. Please try again.",this.success=!1)}},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},passwordStrength(e){const r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/,m=/^(?=.*[a-z]).{6,}$/;return r.test(e)?"Strong":m.test(e)?"Weak":"Very Weak"}}}),P=e=>(C("data-v-277084b5"),e=e(),_(),e),R=P(()=>i("div",{class:"text-center q-pt-lg"},null,-1)),U=P(()=>i("div",{class:"q-mb-md text-h4",style:{"font-weight":"500",color:"#293041"}},"Reset Password",-1)),I={style:{display:"flex",width:"100%"}},N={key:0,class:"q-mt-md"};function M(e,r,m,A,E,L){return o(),d(V,null,{default:a(()=>[t(v,null,{default:a(()=>[t(k,{class:"flex bg-image flex-center"},{default:a(()=>[t(w,{style:g(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:a(()=>[t(w,null,{default:a(()=>[t(p,null,{default:a(()=>[R]),_:1}),t(p,null,{default:a(()=>[U,t(b,{onSubmit:S(e.resetPassword,["prevent"])},{default:a(()=>[t(l,{filled:"",modelValue:e.email,"onUpdate:modelValue":r[0]||(r[0]=s=>e.email=s),label:"Email",type:"email",required:"","lazy-rules":"",rules:[s=>!!s||"Email is required"],disable:""},null,8,["modelValue","rules"]),t(l,{filled:"",modelValue:e.token,"onUpdate:modelValue":r[1]||(r[1]=s=>e.token=s),label:"Token",required:"","lazy-rules":"",rules:[s=>!!s||"Token is required"],disable:""},null,8,["modelValue","rules"]),i("div",I,[t(l,{style:{width:"100%"},filled:"",modelValue:e.password,"onUpdate:modelValue":r[2]||(r[2]=s=>e.password=s),label:"New Password",type:e.passwordVisible?"text":"password",required:"",rules:[s=>!!s||"Password is required",e.passwordStrength]},null,8,["modelValue","type","rules"]),t(u,{style:{"background-color":"#f2f2f2",height:"55px"},dense:"",icon:e.passwordVisible?"visibility_off":"visibility",size:"15px",class:"q-pa-md q-ml-sm",onClick:e.togglePasswordVisibility},null,8,["icon","onClick"])]),t(l,{filled:"",modelValue:e.password_confirmation,"onUpdate:modelValue":r[3]||(r[3]=s=>e.password_confirmation=s),label:"Confirm Password",type:e.passwordVisible?"text":"password",required:"",rules:[s=>!!s||"Confirmation is required",s=>s===e.password||"Passwords do not match"]},null,8,["modelValue","type","rules"]),t(u,{type:"submit",onClick:r[4]||(r[4]=s=>e.resetPassword()),label:"Reset Password",color:"primary",class:"full-width"})]),_:1},8,["onSubmit"]),e.message?(o(),h("div",N,[e.success?(o(),d(f,{key:0,color:"green"},{default:a(()=>[c(n(e.message),1)]),_:1})):(o(),d(f,{key:1,color:"red"},{default:a(()=>[c(n(e.message),1)]),_:1}))])):y("",!0),e.password?(o(),h("div",{key:1,class:"password-strength q-mt-md",style:g({color:e.strengthColor})},[i("p",null,"Password Strength: "+n(e.strengthMessage),1)],4)):y("",!0)]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var me=Q(z,[["render",M],["__scopeId","data-v-277084b5"]]);export{me as default};
