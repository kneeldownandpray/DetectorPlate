import{Q as r}from"./QBtn.725545ea.js";import{Q as D,a as d}from"./QTr.51318e36.js";import{Q as C}from"./QTable.9ea26fae.js";import{Q as u}from"./QInput.61b433c6.js";import{Q}from"./QForm.09e76459.js";import{Q as p}from"./QCardSection.00c79619.js";import{Q as c}from"./QCard.4f2f928a.js";import{Q as m}from"./QSelect.ba6bd96e.js";import{Q as k}from"./QCardActions.3485f222.js";import{Q as v}from"./QPage.a46d10af.js";import{_ as w,k as f,v as h,m as i,d as e,t as n,u as V,av as I,s as b,a4 as O,a5 as x,p as g}from"./index.0f230e14.js";import"./QIcon.a92d8186.js";import"./use-size.38e17cf2.js";import"./render.58209ae1.js";import"./QSpinner.5846cff1.js";import"./dom.d9e3a984.js";import"./use-router-link.b39cd90f.js";import"./vm.bd5b438f.js";import"./QSeparator.22ae7d84.js";import"./use-dark.1601360c.js";import"./QList.a7e1fbc1.js";import"./QMarkupTable.d37dbb35.js";import"./scroll.ec30b58f.js";import"./QCheckbox.a85c7ec2.js";import"./private.use-form.7baad7be.js";import"./use-key-composition.0d667f1b.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./QChip.aa6225fa.js";import"./QItem.bc6baf27.js";import"./QItemLabel.8e160ca5.js";import"./position-engine.5d769691.js";import"./selection.169e5cc5.js";import"./use-model-toggle.a04225df.js";import"./use-tick.dcbcf161.js";import"./use-timeout.bfe16fad.js";import"./use-prevent-scroll.c921f7e1.js";import"./rtl.276c3f1b.js";import"./format.054b8074.js";const S={data(){return{youtubeLink:"",title:"",description:"",isEditing:!1,editId:null,videos:[],dialogOpen:!1,deleteDialogOpen:!1,editDialogOpen:!1,columns:[{name:"actions",label:"Actions",align:"left",field:l=>l,sortable:!1},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"link",label:"Link",align:"left",field:"youtube_link",sortable:!1}],pagination:{rowsPerPage:10}}},methods:{openDialog(){this.dialogOpen=!0},closeDialog(){this.dialogOpen=!1,this.resetForm()},openEditDialog(l){this.youtubeLink=l.youtube_link,this.title=l.title,this.description=l.description,this.isEditing=!0,this.editId=l.id,this.dialogOpen=!0},confirmDeleteVideo(l){this.editId=l,this.deleteDialogOpen=!0},closeDeleteDialog(){this.deleteDialogOpen=!1},deleteVideoConfirmed(){const l="http://93.127.167.211:8090/api";this.$axios.delete(`${l}/user-videos/${this.editId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDeleteDialog()}).catch(o=>{console.error(o)})},confirmUpdateVideo(){this.updateVideo(),this.closeDialog()},fetchVideos(){const l="http://93.127.167.211:8090/api";this.$axios.get(`${l}/user-videos`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(o=>{this.videos=o.data}).catch(o=>{console.error(o)})},submitVideo(){const l="http://93.127.167.211:8090/api";this.$axios.post(`${l}/user-videos`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},updateVideo(){const l="http://93.127.167.211:8090/api";this.$axios.put(`${l}/user-videos/${this.editId}`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},resetForm(){this.youtubeLink="",this.title="",this.description="",this.isEditing=!1,this.editId=null}},mounted(){this.fetchVideos()}},_=l=>(O("data-v-17f1df24"),l=l(),x(),l),U=_(()=>g("h3",{style:{"font-weight":"600"}},"Video Management",-1)),B=_(()=>g("p",null,"Are you sure you want to delete this video?",-1)),E=_(()=>g("p",null,"Are you sure you want to edit this video?",-1));function A(l,o,L,T,a,s){return f(),h(v,{padding:""},{default:i(()=>[U,e(r,{color:"primary",onClick:s.openDialog,label:"Add Video"},null,8,["onClick"]),e(C,{rows:a.videos,columns:a.columns,"row-key":"id",pagination:a.pagination,class:"q-mt-lg"},{body:i(t=>[e(D,{props:t},{default:i(()=>[e(d,{"auto-width":""},{default:i(()=>[e(r,{flat:"",color:"primary",onClick:y=>s.openEditDialog(t.row)},{default:i(()=>[n("Edit")]),_:2},1032,["onClick"]),e(r,{flat:"",color:"negative",onClick:y=>s.confirmDeleteVideo(t.row.id)},{default:i(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024),e(d,null,{default:i(()=>[n(V(t.row.title),1)]),_:2},1024),e(d,null,{default:i(()=>[n(V(t.row.description),1)]),_:2},1024),e(d,null,{default:i(()=>[e(r,{color:"red",href:t.row.youtube_link,target:"_blank",icon:"play_circle","text-color":"white"},{default:i(()=>[n("Watch")]),_:2},1032,["href"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),e(m,{modelValue:a.dialogOpen,"onUpdate:modelValue":o[4]||(o[4]=t=>a.dialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[e(Q,{onSubmit:o[3]||(o[3]=I(t=>a.isEditing?s.updateVideo:s.submitVideo,["prevent"]))},{default:i(()=>[e(u,{modelValue:a.youtubeLink,"onUpdate:modelValue":o[0]||(o[0]=t=>a.youtubeLink=t),label:"YouTube Video Link",rules:[t=>t&&t.length>0||"YouTube link is required"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.title,"onUpdate:modelValue":o[1]||(o[1]=t=>a.title=t),label:"Video Title",maxlength:"25",counter:"",rules:[t=>t&&t.length<=25||"Title must be under 25 characters"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.description,"onUpdate:modelValue":o[2]||(o[2]=t=>a.description=t),label:"Video Description",type:"textarea",maxlength:"40",counter:"",rules:[t=>t.length<=40||"Description must be under 40 characters"]},null,8,["modelValue","rules"]),a.isEditing?b("",!0):(f(),h(r,{key:0,color:"primary",onClick:s.submitVideo,class:"q-mr-sm",label:"Submit",type:"submit"},null,8,["onClick"])),a.isEditing?(f(),h(r,{key:1,color:"secondary",onClick:s.updateVideo,label:"Update",class:"q-mr-sm",type:"submit"},null,8,["onClick"])):b("",!0),e(r,{color:"red",onClick:s.closeDialog,label:"Cancel"},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.deleteDialogOpen,"onUpdate:modelValue":o[5]||(o[5]=t=>a.deleteDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[B]),_:1}),e(k,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.deleteVideoConfirmed},{default:i(()=>[n("Yes, delete")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:s.closeDeleteDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.editDialogOpen,"onUpdate:modelValue":o[6]||(o[6]=t=>a.editDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[E]),_:1}),e(k,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.confirmUpdateVideo},{default:i(()=>[n("Yes, edit")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:l.closeEditDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var De=w(S,[["render",A],["__scopeId","data-v-17f1df24"]]);export{De as default};
