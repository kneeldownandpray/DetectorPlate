import{Q as d}from"./QCardSection.00c79619.js";import{Q as r}from"./QInput.61b433c6.js";import{Q as n}from"./QBtn.725545ea.js";import{Q as P}from"./QSeparator.22ae7d84.js";import{Q as C}from"./QBanner.f3265566.js";import{Q as D}from"./QForm.09e76459.js";import{Q as g}from"./QCard.4f2f928a.js";import{Q as f,b as w}from"./QSelect.ba6bd96e.js";import{Q as h}from"./QCardActions.3485f222.js";import{Q as U}from"./QPage.a46d10af.js";import{Q,a as x}from"./QLayout.f2fd5456.js";import{a as k}from"./axios.ab682c6b.js";import{l as q}from"./index.5c50d63d.js";import I from"./ForgotPassword.87b48133.js";import{_ as E,k as c,v as _,m as a,O as F,d as l,y as L,av as V,p as i,l as v,t as N,u as S,s as b,a4 as T,a5 as B}from"./index.0f230e14.js";import"./render.58209ae1.js";import"./use-key-composition.0d667f1b.js";import"./QIcon.a92d8186.js";import"./use-size.38e17cf2.js";import"./QSpinner.5846cff1.js";import"./uid.937d8ee7.js";import"./use-dark.1601360c.js";import"./focus-manager.7cc6c8df.js";import"./private.use-form.7baad7be.js";import"./dom.d9e3a984.js";import"./use-router-link.b39cd90f.js";import"./vm.bd5b438f.js";import"./QChip.aa6225fa.js";import"./QItem.bc6baf27.js";import"./QItemLabel.8e160ca5.js";import"./position-engine.5d769691.js";import"./selection.169e5cc5.js";import"./scroll.ec30b58f.js";import"./use-model-toggle.a04225df.js";import"./use-tick.dcbcf161.js";import"./use-timeout.bfe16fad.js";import"./use-prevent-scroll.c921f7e1.js";import"./rtl.276c3f1b.js";import"./format.054b8074.js";import"./QResizeObserver.b5bcee06.js";const R={components:{ForgotPassword:I},data(){return{username:"",password:"",error:null,accountTypeDialog:!1,registerEmployerDialog:!1,registerApplicantDialog:!1,successDialog:!1,successMessage:"",registrationData:{first_name:"",middle_name:"",last_name:"",birthday:"",gender:"",age:"",address:"",email:"",password:"",password_confirmation:""},forgotPass:!1,data_handler:null,forgotPassDialog:!1}},watch:{"registrationData.birthday"(s){this.calculateAge()}},mounted(){this.clearLocalStorage()},unmounted(){this.socket.disconnect()},created(){const s="http://93.127.167.211:5500";this.socket=q(s),this.socket.on("receiverTriggerness",(e,p)=>{e=="LoginAutomaticAsEmployer"&&this.loginautomaticalyAsEmployer(),e=="LoginAutomaticAsWorker"&&this.loginautomaticalyAsWorker()})},methods:{loginautomaticalyAsEmployer(){this.username="Gekko@Gekko",this.password="Gekko@Gekko",this.handleLogin()},loginautomaticalyAsWorker(){this.username="Josephdichoso84@gmail.com",this.password="water123",this.handleLogin()},triggerSocketToAdmin(s){this.socket.emit("senderTriggerness",s,552)},clearLocalStorage(){localStorage.removeItem("access_token"),localStorage.removeItem("access_token_employer"),localStorage.removeItem("access_token_applicant"),localStorage.removeItem("user_data"),localStorage.removeItem("user")},passwordDialogReset(){this.forgotPass=!1,this.forgotPassDialog=!0},ClosePopupDialog(){this.registerEmployerDialog=!1,this.registerApplicantDialog=!1,this.forgotPassDialog=!1,this.successDialog=!1},handleForgotPassword(){this.forgotPass=!this.forgotPass},async handleLogin(){try{const s=await k.post("http://93.127.167.211:8090/api/loginFront",{email:this.username,password:this.password}),e=s.data;this.data_handler=e,s.status===200?this.data_handler.user.account_type===5?(localStorage.setItem("access_token_employer",e.access_token),localStorage.removeItem("access_token_applicant"),localStorage.setItem("user",JSON.stringify(e.user)),this.$router.push("/")):this.data_handler.user.account_type===6?(localStorage.setItem("access_token_applicant",e.access_token),localStorage.removeItem("access_token_employer"),localStorage.setItem("user",JSON.stringify(e.user)),this.$router.push("/")):this.error="Unknown account type":this.error=e.message||"Invalid login details"}catch{this.error="An error occurred while trying to log in."}},openRegistration(s){s==="employer"?this.registerEmployerDialog=!0:s==="applicant"&&(this.registerApplicantDialog=!0),this.accountTypeDialog=!1},calculateAge(){if(!this.registrationData.birthday)return;const s=new Date,e=new Date(this.registrationData.birthday);let p=s.getFullYear()-e.getFullYear();const y=s.getMonth()-e.getMonth();(y<0||y===0&&s.getDate()<e.getDate())&&p--,this.registrationData.age=p},async register(s){const e=s==="employer"?"http://93.127.167.211:8090/api/registerEmployer":"http://93.127.167.211:8090/api/registerApplicant";try{(await k.post(e,this.registrationData)).status===200?(this.successMessage="Registration successful! Please log in to continue.",this.successDialog=!0,this.triggerSocketToAdmin("WeHaveANewSignUpAccount")):this.error="Registration failed. Please check your details and try again."}catch{this.error="An error occurred while trying to register."}},redirectToLogin(){this.$router.push("/login")}}},u=s=>(T("data-v-0a8d48e4"),s=s(),B(),s),M=u(()=>i("div",{class:"text-center q-pt-lg"},[i("img",{src:"logo.png",width:"200"})],-1)),G={class:"row justify-between"},W={class:"row justify-center"},Y={class:"row justify-center"},z={key:0,class:"q-mt-md"},J={key:1,style:{position:"fixed","background-color":"red"}},O=u(()=>i("div",{class:"text-h6"},"Are you sure you want to create account?",-1)),j=u(()=>i("div",{class:"text-h6"},"Employer Registration",-1)),H=u(()=>i("div",{class:"text-h5"},"Applicant Registration",-1)),K=u(()=>i("div",{class:"q-mt-sm q-mb-sm text-h6"},"Who are you? ",-1)),X={class:"text-h6"},Z=u(()=>i("div",{class:"text-h6"},"Success!",-1)),$=u(()=>i("div",{class:"text-p"},"You should receive an email shortly to verify your account.",-1));function ee(s,e,p,y,t,m){const A=F("ForgotPassword");return c(),_(Q,null,{default:a(()=>[l(x,null,{default:a(()=>[l(U,{class:"flex bg-image flex-center"},{default:a(()=>[this.forgotPass?b("",!0):(c(),_(g,{key:0,style:L(s.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:a(()=>[l(d,null,{default:a(()=>[M]),_:1}),l(d,null,{default:a(()=>[l(D,{onSubmit:V(m.handleLogin,["prevent"]),class:"q-gutter-md"},{default:a(()=>[l(r,{filled:"",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.username=o),label:"Email","lazy-rules":"",type:"email"},null,8,["modelValue"]),l(r,{type:"password",filled:"",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.password=o),label:"Password","lazy-rules":""},null,8,["modelValue"]),i("div",G,[l(n,{class:"q-pa-sm full-width",label:"Login",type:"submit",color:"primary"})]),i("div",W,[l(n,{flat:"",label:"Forgot password?",class:"text-red q-mx-auto",onClick:m.handleForgotPassword},null,8,["onClick"])]),l(P),i("div",Y,[l(n,{label:"Create Account",color:"secondary",onClick:e[2]||(e[2]=o=>t.accountTypeDialog=!0)})]),t.error?(c(),v("div",z,[l(C,{dense:"",class:"bg-negative text-white"},{default:a(()=>[N(S(t.error),1)]),_:1})])):b("",!0)]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["style"])),this.forgotPass?(c(),v("div",J,[l(A,{onSuccessEmailSent:e[3]||(e[3]=o=>m.passwordDialogReset())})])):b("",!0),l(f,{modelValue:t.accountTypeDialog,"onUpdate:modelValue":e[6]||(e[6]=o=>t.accountTypeDialog=o)},{default:a(()=>[l(g,{class:"custom-dialog"},{default:a(()=>[l(d,null,{default:a(()=>[O]),_:1}),l(d,null,{default:a(()=>[l(n,{label:"Yes",color:"secondary",class:"q-mt-sm q-mr-sm",onClick:e[4]||(e[4]=o=>m.openRegistration("applicant"))}),l(n,{label:"no",color:"primary",class:"q-mt-sm",onClick:e[5]||(e[5]=o=>this.accountTypeDialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{modelValue:t.registerEmployerDialog,"onUpdate:modelValue":e[19]||(e[19]=o=>t.registerEmployerDialog=o)},{default:a(()=>[l(g,{class:"custom-dialog"},{default:a(()=>[l(d,null,{default:a(()=>[j]),_:1}),l(d,null,{default:a(()=>[l(D,{onSubmit:e[18]||(e[18]=V(o=>m.register("employer"),["prevent"]))},{default:a(()=>[l(r,{filled:"",modelValue:t.registrationData.first_name,"onUpdate:modelValue":e[7]||(e[7]=o=>t.registrationData.first_name=o),label:"School Name"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.middle_name,"onUpdate:modelValue":e[8]||(e[8]=o=>t.registrationData.middle_name=o),label:"School Number"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.last_name,"onUpdate:modelValue":e[9]||(e[9]=o=>t.registrationData.last_name=o),label:"Assigned Personel Name"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.birthday,"onUpdate:modelValue":e[10]||(e[10]=o=>t.registrationData.birthday=o),label:"Birthday",type:"date"},null,8,["modelValue"]),l(w,{filled:"",modelValue:t.registrationData.gender,"onUpdate:modelValue":e[11]||(e[11]=o=>t.registrationData.gender=o),options:["Male","Female"],label:"Gender"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.age,"onUpdate:modelValue":e[12]||(e[12]=o=>t.registrationData.age=o),label:"Age",type:"number",readonly:""},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.address,"onUpdate:modelValue":e[13]||(e[13]=o=>t.registrationData.address=o),label:"Address"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.email,"onUpdate:modelValue":e[14]||(e[14]=o=>t.registrationData.email=o),label:"Email",type:"email"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.password,"onUpdate:modelValue":e[15]||(e[15]=o=>t.registrationData.password=o),label:"Password",type:"password"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.password_confirmation,"onUpdate:modelValue":e[16]||(e[16]=o=>t.registrationData.password_confirmation=o),label:"Confirm Password",type:"password"},null,8,["modelValue"]),l(n,{label:"Register",class:"q-mt-sm q-mr-sm",type:"submit",color:"primary"}),l(n,{label:"Cancel",flat:"",class:"q-mt-sm",color:"red",onClick:e[17]||(e[17]=o=>m.ClosePopupDialog())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{modelValue:t.registerApplicantDialog,"onUpdate:modelValue":e[32]||(e[32]=o=>t.registerApplicantDialog=o)},{default:a(()=>[l(g,{class:"custom-dialog"},{default:a(()=>[l(d,null,{default:a(()=>[H]),_:1}),l(d,null,{default:a(()=>[l(D,{onSubmit:e[31]||(e[31]=V(o=>m.register("applicant"),["prevent"]))},{default:a(()=>[l(r,{filled:"",modelValue:t.registrationData.first_name,"onUpdate:modelValue":e[20]||(e[20]=o=>t.registrationData.first_name=o),label:"School Name"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.middle_name,"onUpdate:modelValue":e[21]||(e[21]=o=>t.registrationData.middle_name=o),label:"School Number"},null,8,["modelValue"]),K,l(r,{filled:"",modelValue:t.registrationData.last_name,"onUpdate:modelValue":e[22]||(e[22]=o=>t.registrationData.last_name=o),label:"Your Full Name (Juan, Dela Cruz)"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.birthday,"onUpdate:modelValue":e[23]||(e[23]=o=>t.registrationData.birthday=o),label:"Birthday",type:"date"},null,8,["modelValue"]),l(w,{filled:"",modelValue:t.registrationData.gender,"onUpdate:modelValue":e[24]||(e[24]=o=>t.registrationData.gender=o),options:["Male","Female"],label:"Gender"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.age,"onUpdate:modelValue":e[25]||(e[25]=o=>t.registrationData.age=o),label:"Age",type:"number",readonly:""},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.address,"onUpdate:modelValue":e[26]||(e[26]=o=>t.registrationData.address=o),label:"Address"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.email,"onUpdate:modelValue":e[27]||(e[27]=o=>t.registrationData.email=o),label:"Email",type:"email"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.password,"onUpdate:modelValue":e[28]||(e[28]=o=>t.registrationData.password=o),label:"Password",type:"password"},null,8,["modelValue"]),l(r,{filled:"",modelValue:t.registrationData.password_confirmation,"onUpdate:modelValue":e[29]||(e[29]=o=>t.registrationData.password_confirmation=o),label:"Confirm Password",type:"password"},null,8,["modelValue"]),l(n,{label:"Register",class:"q-mt-sm q-mr-sm",type:"submit",color:"secondary"}),l(n,{label:"Cancel",flat:"",class:"q-mt-sm",color:"red",onClick:e[30]||(e[30]=o=>m.ClosePopupDialog())})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{modelValue:t.successDialog,"onUpdate:modelValue":e[33]||(e[33]=o=>t.successDialog=o)},{default:a(()=>[l(g,{class:"custom-dialog"},{default:a(()=>[l(d,null,{default:a(()=>[i("div",X,S(t.successMessage),1)]),_:1}),l(h,null,{default:a(()=>[l(n,{label:"Continue",color:"primary",onClick:m.ClosePopupDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(f,{modelValue:t.forgotPassDialog,"onUpdate:modelValue":e[34]||(e[34]=o=>t.forgotPassDialog=o)},{default:a(()=>[l(g,{class:"custom-dialog"},{default:a(()=>[l(d,null,{default:a(()=>[Z,$]),_:1}),l(h,null,{default:a(()=>[l(n,{label:"Ok",color:"primary",onClick:m.ClosePopupDialog},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}var Me=E(R,[["render",ee],["__scopeId","data-v-0a8d48e4"]]);export{Me as default};
