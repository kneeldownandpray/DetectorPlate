import{Q as n}from"./QBtn.725545ea.js";import{Q as g}from"./QPage.a46d10af.js";import{a as l}from"./axios.ab682c6b.js";import{U as v}from"./UserProfile.ef87e0ef.js";import{_ as y,k as c,v as d,m as x,l as u,p as s,u as p,s as m,d as a,O as k}from"./index.0f230e14.js";import"./QIcon.a92d8186.js";import"./use-size.38e17cf2.js";import"./render.58209ae1.js";import"./QSpinner.5846cff1.js";import"./dom.d9e3a984.js";import"./use-router-link.b39cd90f.js";import"./vm.bd5b438f.js";import"./QBanner.f3265566.js";import"./use-dark.1601360c.js";import"./QCardSection.00c79619.js";import"./QImg.17247ce1.js";import"./use-timeout.bfe16fad.js";import"./QItem.bc6baf27.js";import"./QList.a7e1fbc1.js";import"./QCard.4f2f928a.js";const h="http://93.127.167.211:8090/api",V={components:{UserProfile:v},data(){return{currentVideo:null,videoQueue:[],currentIndex:-1,isFetching:!1,hiringpopup:!1,hiringStatus:null}},computed:{hiringStatusComputed(){return this.hiringStatus}},methods:{async isHiringFunctionButton(){try{const e=localStorage.getItem("access_token_employer"),t=await l.post(`${h}/hire`,{applicant_id:this.currentVideo.user_id},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Error:",e),e.response&&console.error("Response data:",e.response.data)}this.hiringStatus=!0},HireStatus(e){this.hiringStatus=e},async fetchInitialVideo(){try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${h}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex=0,this.currentVideo=i,this.updateVideo())}catch(e){console.error("Error fetching initial video:",e)}},async fetchNextVideo(){if(!this.isFetching){this.isFetching=!0;try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${h}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex++,this.updateVideo())}catch(e){console.error("Error fetching next video:",e)}finally{this.isFetching=!1}}},async fetchPreviousVideo(){if(!this.isFetching){this.isFetching=!0;try{this.currentIndex>0&&(this.currentIndex--,this.updateVideo())}catch(e){console.error("Error fetching previous video:",e)}finally{this.isFetching=!1}}},updateVideo(){this.currentIndex>=0&&this.currentIndex<this.videoQueue.length&&(this.currentVideo=this.videoQueue[this.currentIndex],this.$nextTick(()=>{}))},formatUrl(e){return`https://www.youtube.com/embed/${new URL(e).searchParams.get("v")}`},handleHireClick(){this.hiringpopup=!0}},watch:{hiringStatus(e){}},mounted(){this.fetchInitialVideo()}},b={class:"q-mt-md q-ml-md q-mr-md",style:{display:"flex",padding:"3px","justify-content":"space-between"}},w={key:1,class:"video-wrapper"},C={class:"video-container"},I={class:"detail-container",ref:"detailContainer",style:{"flex-direction":"column"}},S={key:0,style:{"background-color":"transparent",color:"white",padding:"5px"}},B={class:"video-title"},H={class:"video-description"},F=["src"],Q={class:"button-container",style:{"flex-direction":"column"}};function U(e,t,i,q,r,o){const f=k("UserProfile");return r.hiringpopup?(c(),d(g,{key:0},{default:x(()=>[s("div",b,[a(n,{label:"back",onClick:t[0]||(t[0]=_=>r.hiringpopup=!1)}),o.hiringStatusComputed?(c(),d(n,{key:1,label:"Requested to admin",color:"lightgray",disable:""})):(c(),d(n,{key:0,label:"Hire this applicant",class:"zoom-animation-loop",color:"green",onClick:t[1]||(t[1]=_=>o.isHiringFunctionButton())}))]),a(f,{number:r.currentVideo.user_id,onHireStatus:o.HireStatus},null,8,["number","onHireStatus"])]),_:1})):(c(),u("div",w,[s("div",C,[s("div",I,[r.currentVideo?(c(),u("div",S,[s("div",B,p(r.currentVideo.title),1),s("div",H,p(r.currentVideo.description),1)])):m("",!0)],512),r.currentVideo?(c(),u("iframe",{key:0,src:o.formatUrl(r.currentVideo.link),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,F)):m("",!0)]),s("div",Q,[s("div",null,[a(n,{icon:"chevron_left",onClick:o.fetchPreviousVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"]),a(n,{label:"Hire now!",onClick:o.handleHireClick,class:"q-mx-xs zoom-animation-loop",rounded:"",color:"green"},null,8,["onClick"]),a(n,{icon:"chevron_right",onClick:o.fetchNextVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"])])])]))}var ee=y(V,[["render",U],["__scopeId","data-v-5cd0032a"]]);export{ee as default};
