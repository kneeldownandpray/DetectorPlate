import{Q as s}from"./QBtn.725545ea.js";import{d as v,Q as h}from"./QDate.5c89bce9.js";import{Q as C}from"./QInput.61b433c6.js";import{Q as w,a as m}from"./QTr.51318e36.js";import{Q as _}from"./QImg.17247ce1.js";import{Q}from"./QTable.9ea26fae.js";import{Q as f}from"./QCardSection.00c79619.js";import{Q as p}from"./QCard.4f2f928a.js";import{Q as V}from"./QCardActions.3485f222.js";import{Q as I}from"./QSelect.ba6bd96e.js";import{Q as T}from"./QPage.a46d10af.js";import{a as b}from"./axios.ab682c6b.js";import{_ as B,k as d,v as u,m as i,p as c,d as t,l as Y,s as x,y as k,u as D,t as g}from"./index.0f230e14.js";import"./QIcon.a92d8186.js";import"./use-size.38e17cf2.js";import"./render.58209ae1.js";import"./QSpinner.5846cff1.js";import"./dom.d9e3a984.js";import"./use-router-link.b39cd90f.js";import"./vm.bd5b438f.js";import"./use-dark.1601360c.js";import"./use-render-cache.3aae9b27.js";import"./private.use-form.7baad7be.js";import"./format.054b8074.js";import"./use-key-composition.0d667f1b.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./use-timeout.bfe16fad.js";import"./QSeparator.22ae7d84.js";import"./QList.a7e1fbc1.js";import"./QMarkupTable.d37dbb35.js";import"./scroll.ec30b58f.js";import"./QCheckbox.a85c7ec2.js";import"./QChip.aa6225fa.js";import"./QItem.bc6baf27.js";import"./QItemLabel.8e160ca5.js";import"./position-engine.5d769691.js";import"./selection.169e5cc5.js";import"./use-model-toggle.a04225df.js";import"./use-tick.dcbcf161.js";import"./use-prevent-scroll.c921f7e1.js";import"./rtl.276c3f1b.js";const S={data(){return{isfillteredbycalendar:!1,savedData:[],filteredData:[],pagination:{rowsPerPage:5},columns:[{name:"pattern",label:"Plate Pattern",align:"left",field:"pattern"},{name:"color",label:"Color",align:"left",field:"color"},{name:"vehicleType",label:"Vehicle Type",align:"left",field:"vehicle_type"},{name:"timestamp",label:"Timestamp",align:"left",field:"created_at"},{name:"image",label:"Image",align:"left",field:"image"},{name:"actions",label:"Actions",align:"center",field:"actions"}],imageDialogVisible:!1,selectedImage:"",userId:"",startDate:"",endDate:""}},mounted(){this.loadData()},methods:{alertMaintenance(){alert("This function is under maintenance (purpose of this is to show profile of registered user)")},async loadData(){if(this.userId=JSON.parse(localStorage.getItem("user")).id,this.userId)try{const l=await b.get(`http://93.127.167.211:8090/api/vehicle-records/${this.userId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_employer")}`,"Content-Type":"multipart/form-data"}});this.savedData=l.data.data,this.filteredData=this.savedData}catch(l){console.error("Error fetching data:",l)}else console.log("User ID not found in localStorage")},formatDate(l){return v.formatDate(l,"MMMM D, YYYY (h:mm A)")},filterByYesterday(){const l=new Date;l.setDate(l.getDate()-1);const a=l.toISOString().split("T")[0];this.filteredData=this.savedData.filter(y=>y.created_at.startsWith(a))},filterByToday(){const l=new Date().toISOString().split("T")[0];this.filteredData=this.savedData.filter(a=>a.created_at.startsWith(l))},filterByDateRange(){this.startDate&&this.endDate&&(this.filteredData=this.savedData.filter(l=>{const a=l.created_at.split("T")[0];return a>=this.startDate&&a<=this.endDate}))},editData(l){console.log("Edit item:",l)},deleteData(l){confirm("Are you sure you want to delete this item?")&&b.delete(`http://93.127.167.211:8090/api/vehicle-records/${l.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_employer")}`,"Content-Type":"multipart/form-data"}}).then(()=>{this.savedData=this.savedData.filter(a=>a.id!==l.id),this.filteredData=this.filteredData.filter(a=>a.id!==l.id)}).catch(a=>{console.error("Error deleting record:",a)})},showImage(l){this.selectedImage=l,this.imageDialogVisible=!0}}},q={class:"q-mb-md"},M={key:0,class:"q-mb-md"},P={class:"q-mb-xs"};function z(l,a,y,A,r,o){return d(),u(T,{class:"q-pa-md"},{default:i(()=>[c("div",q,[t(s,{onClick:o.filterByYesterday,label:"Yesterday",icon:"date_range",color:"primary",class:"q-mr-md"},null,8,["onClick"]),t(s,{onClick:o.filterByToday,label:"Today",icon:"today",class:"q-mr-md",color:"secondary"},null,8,["onClick"]),t(s,{onClick:a[0]||(a[0]=e=>r.isfillteredbycalendar=!r.isfillteredbycalendar),label:"Filter by Calendar",icon:"today",color:"red"})]),r.isfillteredbycalendar?(d(),Y("div",M,[t(h,{modelValue:r.startDate,"onUpdate:modelValue":a[1]||(a[1]=e=>r.startDate=e),mask:"YYYY-MM-DD",label:"Start Date",min:l.minDate,max:r.endDate,class:"q-mr-md"},null,8,["modelValue","min","max"]),t(h,{modelValue:r.endDate,"onUpdate:modelValue":a[2]||(a[2]=e=>r.endDate=e),mask:"YYYY-MM-DD",label:"End Date",min:r.startDate,class:"q-mr-md"},null,8,["modelValue","min"]),t(s,{onClick:o.filterByDateRange,label:"Filter by Date Range",color:"primary",icon:"filter_list"},null,8,["onClick"])])):x("",!0),r.savedData.length?(d(),u(p,{key:1,class:"q-mb-md"},{default:i(()=>[t(f,null,{default:i(()=>[t(Q,{rows:r.filteredData,columns:r.columns,"row-key":"id",pagination:r.pagination,flat:""},{body:i(e=>[t(w,{props:e},{default:i(()=>[t(m,{props:e,key:"pattern"},{default:i(()=>[t(C,{modelValue:e.row.pattern,"onUpdate:modelValue":n=>e.row.pattern=n,label:"Plate Pattern",onBlur:n=>l.updateData(e.row),dense:"",filled:"",class:"q-mb-none"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["props"]),t(m,{props:e,key:"color"},{default:i(()=>[c("div",P,[c("span",{style:k({color:e.row.color})},D(e.row.color),5)]),c("div",{style:k([{backgroundColor:e.row.color},{height:"20px",width:"20px","border-radius":"50%"}])},null,4)]),_:2},1032,["props"]),t(m,{props:e,key:"vehicleType"},{default:i(()=>[g(D(e.row.vehicle_type),1)]),_:2},1032,["props"]),t(m,{props:e,key:"timestamp"},{default:i(()=>[g(D(o.formatDate(e.row.created_at)),1)]),_:2},1032,["props"]),t(m,{props:e,key:"image"},{default:i(()=>[t(_,{src:e.row.image,alt:`Plate Image: ${e.row.pattern}`,width:"50px",onClick:n=>o.showImage(e.row.image),class:"thumbnail-image"},null,8,["src","alt","onClick"])]),_:2},1032,["props"]),t(m,{props:e,key:"actions"},{default:i(()=>[t(s,{onClick:a[3]||(a[3]=n=>o.alertMaintenance()),icon:"person",color:"black",flat:"",size:"sm"}),t(s,{onClick:n=>o.editData(e.row),icon:"edit",color:"primary",flat:"",size:"sm"},null,8,["onClick"]),t(s,{onClick:n=>o.deleteData(e.row),icon:"delete",color:"negative",flat:"",size:"sm"},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])]),_:1})]),_:1})):(d(),u(p,{key:2},{default:i(()=>[t(f,null,{default:i(()=>[g("No data saved yet.")]),_:1})]),_:1})),t(I,{modelValue:r.imageDialogVisible,"onUpdate:modelValue":a[5]||(a[5]=e=>r.imageDialogVisible=e),style:{"z-index":"1111111"}},{default:i(()=>[t(p,{style:{"min-width":"350px"}},{default:i(()=>[t(f,null,{default:i(()=>[t(_,{src:r.selectedImage,alt:"Full-size Plate Image"},null,8,["src"])]),_:1}),t(V,null,{default:i(()=>[t(s,{flat:"",label:"Close",color:"primary",onClick:a[4]||(a[4]=e=>r.imageDialogVisible=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ve=B(S,[["render",z],["__scopeId","data-v-59e49028"]]);export{Ve as default};
