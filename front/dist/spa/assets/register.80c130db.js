import{j as x,r as d,_ as D,k as o,l as c,d as j,m as q,n as m,p,F as v,q as g,s as y,t as I,u as w,v as _,x as C,y as $,f as N}from"./index.d4268c22.js";import{Q as O}from"./QIcon.183e8fa8.js";import{Q as S}from"./QBtn.13c9c28e.js";import{Q as P}from"./QMarkupTable.7032e167.js";import"./use-size.fd56a178.js";import"./render.d29caea9.js";import"./QSpinner.54ae2b08.js";import"./dom.e83c55c8.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";import"./use-dark.57e59592.js";const Q=x({name:"QHierarchy",props:["data","columns","separator","dense","dark","flat","bordered","square","classes","defaultExpandAll","filter"],setup(){return{leftDrawerOpen:d(!1),isExpanded:d(!0),selectedRowID:d({}),itemId:d(null),temp_data:d([]),temp_index:d(1),first_call:d(!1)}},watch:{selectedIDRow:function(e){this.selectedRowID!=null&&this.$set(this.selectedRowID,"_index",e)}},methods:{recursive(e,n,s,a,i,l){let t=this;e.forEach(function(r){if(r.children&&r.children.length!=0)r.level=s,r.leaf=!1,r.sortDirection="none",r.sorted=d(!1),r._index=t.temp_index,t.temp_index=t.temp_index+1,l&&(r.expend=!0),n.push(r),r._index==a&&(r.expend=i),r.expend==!0&&t.recursive(r.children,n,r.level+1,a,i,l);else return r.level=s,r.leaf=d(!0),r.sortDirection="none",r.sorted=d(!1),r._index=t.temp_index,t.temp_index=t.temp_index+1,n.push(r),!1})},iconName(e){return e.expend==!0?"remove":e.children&&e.children.length>0?"add":"done"},toggle(e){let n=this;n.itemId=e._index,e.leaf=d(!1),e.leaf==!1&&e.expend==null&&e.children!=null&&e.children.length!=0&&n.recursive(e.children,[],e.level+1,e._index,e.expend,!1),e.expend==!0&&e.children!=null&&(e.children.forEach(function(s){s.expend=void 0,n.setUndefined(s)}),e.expend=d(void 0),e.leaf=d(!1),n.itemId=null)},setPadding(e){return`padding-left: ${e.level*30}px;`},setUndefined(e){let n=this;e.hasOwnProperty("children")&&e.children&&e.children.forEach(function(s){s.expend=d(void 0),n.setUndefined(s)})},sortBy(e){e.sortDirection==="asc"?(this.sort_recursive(this.data,e,!0),e.sortDirection="desc",e.arrow_downward="arrow_downward"):(this.sort_recursive(this.data,e,!1),e.sortDirection="asc"),e.sorted=!0,this.$emit("sort_column",e),this.resetSorting(e)},sort_recursive(e,n,s){e.sort(this.sort_by(n,s));for(let a=0;a<e.length;a++)e[a].hasOwnProperty("children")&&this.sort_recursive(e[a].children,n,s)},sort_by(e,n){let s=n?-1:1;if(e.sortingType==="custom"&&typeof e.sortingFunc=="function")return function(i,l){return e.sortingFunc(i,l)*s};let a=function(i){return i.hasOwnProperty(e.field)?i[e.field]===null?"":i[e.field].toLowerCase():""};switch(e.sortingType){case"number":a=function(i){return parseFloat(i[e.field])};break;case"date":a=function(i){return new Date(i[e.field])};break}return function(i,l){return i=a(i),l=a(l),s*((i>l)-(l>i))}},resetSorting(e){let n=this.columns.length;for(let s=0;s<n;s++){let a=this.columns[s];a.field!=e.field&&(a.sorted=d(!1),a.sortDirection="none")}},filter_data(e,n,s,a,i){let l=[];if(!n||n.length<3)for(let t=0;t<e.length;t++){let r=e[t];r.visible&&l.push(r)}else{let t=[],r=0;for(let u=0;u<e.length;u++){let f=e[u];for(;r>=f.level;)t.pop(),r--;if(t.push(f),r=f.level,this.include(f,n,s,a)){for(let h=0;h<t.length;h++){let b=t[h];b.expend&&(i&&(b.expend=!0),l.push(b))}l.push(f),t=[]}}}return console.log(l),l},include(e,n,s,a){let i=!1,l=!1;l=!0,this.checkItem(e,n,s)&&(i=!0);let t=a.length;for(let r=0;r<t;r++){let u=a[r];u.filterable&&(l=!0,this.checkItem(e,n,u)&&(i=!0))}return l?i:!0},checkItem(e,n,s){if(s.sortingType==="number"){if(e[s.field]!=null&&parseFloat(e[s.field])===parseFloat(n))return!0}else if(e[s.field]!=null&&e[s.field].toLowerCase().indexOf(n.toLowerCase())!==-1)return!0}},computed:{arrayTreeObj(){let e=this,n=[];return this.temp_data=[],e.temp_index=1,e.recursive(e.data,n,0,e.itemId,e.isExpanded,e.first_call),e.first_call=d(!1),this.filter&&this.filter.length>=3?this.filter_data(n,this.filter,!0,this.columns):n},hasDefaultSlot(){return this.$slots.hasOwnProperty("body")}},created(){this.defaultExpandAll&&(this.first_call=d(!0))}}),T=["onClick"],F={class:"q-ml-sm"};function E(e,n,s,a,i,l){return o(),c("span",null,[j(P,{separator:e.separator,dense:e.dense,dark:e.dark,flat:e.flat,bordered:e.bordered,square:e.square,class:m(e.classes)},{default:q(()=>[p("thead",null,[p("tr",null,[(o(!0),c(v,null,g(e.columns,t=>(o(),c("th",{onClick:r=>t.sortable?e.sortBy(t):null,class:m("text-"+t.align)},[I(w(t.label)+" ",1),t.sorted?(o(),_(O,{key:0,name:t.sortDirection=="asc"?"arrow_upward":"arrow_downward"},null,8,["name"])):y("",!0)],10,T))),256))])]),p("tbody",null,[e.hasDefaultSlot?(o(!0),c(v,{key:0},g(e.arrayTreeObj,(t,r)=>(o(),c("tr",{key:r},[C(e.$slots,"body",{item:t,toggle:e.toggle,setPadding:e.setPadding,iconName:e.iconName})]))),128)):y("",!0),e.hasDefaultSlot?y("",!0):(o(!0),c(v,{key:1},g(e.arrayTreeObj,(t,r)=>(o(),c("tr",{key:r},[(o(!0),c(v,null,g(e.columns,(u,f)=>(o(),c("td",{"data-th":"Name",class:m("text-"+u.align)},[p("div",{style:$(f==0?e.setPadding(t):{"padding-left":"30px"}),class:m(e.iconName(t)!="done"?"q-pl-lg":"")},[e.iconName(t)!="done"&&f==0?(o(),_(S,{key:0,onClick:h=>f==0?e.toggle(t):{},icon:e.iconName(t),flat:"",dense:""},null,8,["onClick","icon"])):y("",!0),p("span",F,w(t[u.field]),1)],6)],2))),256))]))),128))])]),_:3},8,["separator","dense","dark","flat","bordered","square","class"])])}var k=D(Q,[["render",E]]);const B="quasar-ui-qhierarchy",z="1.0.12",A="pratikpatelpp802@gmail.com",L="QHierarchy",V="MIT",H="dist/index.esm.js",R="dist/index.common.js",M={dev:"cd dev && yarn dev && cd ..","dev:umd":"yarn build && node build/script.open-umd.js","dev:ssr":"cd dev && yarn 'dev:ssr' && cd ..","dev:ios":"cd dev && yarn 'dev:ios' && cd ..","dev:android":"cd dev && yarn 'dev:android' && cd ..","dev:electron":"cd dev && yarn 'dev:electron' && cd ..",build:"node build/index.js","build:js":"node build/script.javascript.js"},U="https://next-quasar-qhierarchy.netlify.app/",G={type:"git",url:"git+https://github.com/pratik227/quasar-qhierarchy.git"},J={type:"github",url:"https://github.com/sponsors/pratik227"},K="",W={"@rollup/plugin-buble":"^0.21.3","@rollup/plugin-json":"^4.0.0","@rollup/plugin-node-resolve":"^11.2.1","@rollup/plugin-replace":"^2.4.2",chalk:"^4.1.0","fs-extra":"^8.1.0",open:"^7.3.0",quasar:"^2.0.0-beta.12",rimraf:"^3.0.0",rollup:"^2.45.0","uglify-js":"^3.13.3",zlib:"^1.0.5"},X=["last 4 Chrome versions","last 4 Firefox versions","last 2 Edge versions","last 4 Safari versions","last 4 Android versions","last 4 ChromeAndroid versions","last 4 FirefoxAndroid versions","last 4 iOS versions"];var Y={name:B,version:z,author:A,description:L,license:V,module:H,main:R,scripts:M,homepage:U,repository:G,funding:J,bugs:K,devDependencies:W,browserslist:X};const{version:Z}=Y;function ee(e){e.component(k.name,k)}var re=Object.freeze(Object.defineProperty({__proto__:null,version:Z,QHierarchy:k,install:ee},Symbol.toStringTag,{value:"Module"})),pe=N(({app:e})=>{e.use(re)});export{pe as default};
