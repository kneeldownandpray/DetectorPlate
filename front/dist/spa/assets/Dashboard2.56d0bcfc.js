import{Q as p}from"./QBtn.6503b927.js";import{Q as i}from"./QCardSection.b2f04ae9.js";import{a as _}from"./QItem.0e72154d.js";import{Q as u}from"./QCard.d3cf51b6.js";import{Q as y}from"./QCardActions.8256de57.js";import{Q as k}from"./QDialog.ea73e085.js";import{Q as P}from"./QPage.cd2df875.js";import{C as w,D as Q}from"./TextExtractor.983d5875.js";import{C as A}from"./ControllerData.da0b9eb8.js";import{_ as N,k as n,v as m,m as o,O as c,d as e,p as a,l as S,q as x,F as T,s as V,u as f}from"./index.ef86348d.js";import"./QIcon.c3f0630e.js";import"./use-size.955305ef.js";import"./render.0fa28f0b.js";import"./QSpinner.61c3e8e6.js";import"./dom.a0618220.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./use-dark.51648456.js";import"./use-prevent-scroll.ddadc635.js";import"./scroll.124b3ac8.js";import"./use-timeout.e83c5089.js";import"./use-tick.9dbc1409.js";import"./use-model-toggle.2da2574c.js";import"./use-portal.50097725.js";import"./focus-manager.7cc6c8df.js";import"./QInput.d328d0ea.js";import"./use-key-composition.152c5e79.js";import"./uid.937d8ee7.js";import"./private.use-form.71a42291.js";import"./QImg.6384037a.js";import"./QList.b595b344.js";import"./FileSaver.min.e97ed772.js";import"./axios.ab682c6b.js";import"./use-render-cache.3aae9b27.js";import"./format.054b8074.js";import"./QTd.b39ac00d.js";import"./QTr.361c666b.js";import"./QTable.0d596f76.js";import"./QSeparator.76e346ac.js";import"./QMarkupTable.28295d05.js";import"./QSelect.dd8fb500.js";import"./QChip.05695b8a.js";import"./QItemLabel.8cc1f1e2.js";import"./position-engine.c1775d96.js";import"./selection.28dee7bf.js";import"./rtl.276c3f1b.js";import"./QCheckbox.922543fe.js";const v={components:{CameraLinker:w,DecisioMaker:Q,ControllerData:A},data(){return{detectedPlates:[],sendForAnalysis:!1,permanentRecords:[],detectionTimer:null,showControllerDataDialog:!1}},mounted(){this.jorellestorage()},methods:{jorellestorage(){const t=localStorage.getItem("permanentPlates");t&&(console.log(t),this.permanentRecords=JSON.parse(t))},handleNewDetection(t){this.detectedPlates=t,this.detectionTimer&&clearTimeout(this.detectionTimer),this.detectionTimer=setTimeout(()=>{this.detectedPlates.length&&(console.log("No new detection for 5 seconds, sending for analysis..."),this.sendToDecisionMaker())},500)},sendToDecisionMaker(){this.sendForAnalysis=!0,console.log("Sending plates for analysis:",this.detectedPlates)},handleAnalyzeCompleted(t){console.log("Analysis completed:",t),this.permanentRecords.push(...t),this.updateLocalStorage()},updateLocalStorage(){localStorage.setItem("permanentPlates",JSON.stringify(this.permanentRecords))},resetData(){this.detectedPlates=[],this.sendForAnalysis=!1,console.log("Data reset successfully."),this.jorellestorage(),localStorage.setItem("resetTriggernessCameraArray",JSON.stringify(!0)),console.log(this.detectedPlates)},openControllerDataDialog(){this.showControllerDataDialog=!0},closeControllerDataDialog(){this.showControllerDataDialog=!1}}},z={class:"",style:{"justify-content":"space-between",display:"flex"}},F={class:"col-8 flex"},L=a("h2",null,"Plates Detected",-1);function R(t,d,B,I,l,r){const h=c("CameraLinker"),D=c("DecisioMaker"),g=c("ControllerData");return n(),m(P,{class:"q-pa-md"},{default:o(()=>[e(p,{label:"View Records",onClick:r.openControllerDataDialog},null,8,["onClick"]),a("div",z,[a("div",F,[e(i,null,{default:o(()=>[e(h,{onNewDetection:r.handleNewDetection,style:{width:"70%"},class:"q-mt-sm"},null,8,["onNewDetection"])]),_:1})]),e(u,{class:"col-4 flex"},{default:o(()=>[e(i,null,{default:o(()=>[e(D,{plates:l.detectedPlates,"send-for-analysis":l.sendForAnalysis,onAnalyzeCompleted:r.handleAnalyzeCompleted,onClearPlates:r.resetData},null,8,["plates","send-for-analysis","onAnalyzeCompleted","onClearPlates"])]),_:1}),l.detectedPlates.length?(n(),m(i,{key:0},{default:o(()=>[L,a("ul",null,[(n(!0),S(T,null,x(l.detectedPlates,(s,C)=>(n(),m(_,{key:C},{default:o(()=>[a("div",null,f(s.text)+" - "+f(s.color),1)]),_:2},1024))),128))])]),_:1})):V("",!0)]),_:1})]),e(k,{modelValue:l.showControllerDataDialog,"onUpdate:modelValue":d[0]||(d[0]=s=>l.showControllerDataDialog=s),persistent:!0,maximized:!0,style:{zIndex:"11111"}},{default:o(()=>[e(u,null,{default:o(()=>[e(i,null,{default:o(()=>[e(p,{color:"red",label:"Close",onClick:r.closeControllerDataDialog},null,8,["onClick"]),e(g)]),_:1}),e(y)]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ve=N(v,[["render",R]]);export{ve as default};
