import{Q as s}from"./QBtn.6503b927.js";import{Q as g}from"./QPage.cd2df875.js";import{a as l}from"./axios.ab682c6b.js";import{U as v}from"./UserProfile.7b84ec8c.js";import{_ as y,k as c,v as d,m as k,l as u,p as n,u as p,s as m,d as a,O as x}from"./index.ef86348d.js";import"./QIcon.c3f0630e.js";import"./use-size.955305ef.js";import"./render.0fa28f0b.js";import"./QSpinner.61c3e8e6.js";import"./dom.a0618220.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./QBanner.c4a5e154.js";import"./use-dark.51648456.js";import"./QCardSection.b2f04ae9.js";import"./QImg.6384037a.js";import"./use-timeout.e83c5089.js";import"./QItem.0e72154d.js";import"./QList.b595b344.js";import"./QCard.d3cf51b6.js";const h="https://backend.parkease.online/api",V={components:{UserProfile:v},data(){return{currentVideo:null,videoQueue:[],currentIndex:-1,isFetching:!1,hiringpopup:!1,hiringStatus:null}},computed:{hiringStatusComputed(){return this.hiringStatus}},methods:{async isHiringFunctionButton(){try{const e=localStorage.getItem("access_token_employer"),t=await l.post(`${h}/hire`,{applicant_id:this.currentVideo.user_id},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Error:",e),e.response&&console.error("Response data:",e.response.data)}this.hiringStatus=!0},HireStatus(e){this.hiringStatus=e},async fetchInitialVideo(){try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${h}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex=0,this.currentVideo=i,this.updateVideo())}catch(e){console.error("Error fetching initial video:",e)}},async fetchNextVideo(){if(!this.isFetching){this.isFetching=!0;try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${h}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex++,this.updateVideo())}catch(e){console.error("Error fetching next video:",e)}finally{this.isFetching=!1}}},async fetchPreviousVideo(){if(!this.isFetching){this.isFetching=!0;try{this.currentIndex>0&&(this.currentIndex--,this.updateVideo())}catch(e){console.error("Error fetching previous video:",e)}finally{this.isFetching=!1}}},updateVideo(){this.currentIndex>=0&&this.currentIndex<this.videoQueue.length&&(this.currentVideo=this.videoQueue[this.currentIndex],this.$nextTick(()=>{}))},formatUrl(e){return`https://www.youtube.com/embed/${new URL(e).searchParams.get("v")}`},handleHireClick(){this.hiringpopup=!0}},watch:{hiringStatus(e){}},mounted(){this.fetchInitialVideo()}},b={class:"q-mt-md q-ml-md q-mr-md",style:{display:"flex",padding:"3px","justify-content":"space-between"}},w={key:1,class:"video-wrapper"},C={class:"video-container"},I={class:"detail-container",ref:"detailContainer",style:{"flex-direction":"column"}},S={key:0,style:{"background-color":"transparent",color:"white",padding:"5px"}},B={class:"video-title"},H={class:"video-description"},F=["src"],Q={class:"button-container",style:{"flex-direction":"column"}};function U(e,t,i,q,r,o){const f=x("UserProfile");return r.hiringpopup?(c(),d(g,{key:0},{default:k(()=>[n("div",b,[a(s,{label:"back",onClick:t[0]||(t[0]=_=>r.hiringpopup=!1)}),o.hiringStatusComputed?(c(),d(s,{key:1,label:"Requested to admin",color:"lightgray",disable:""})):(c(),d(s,{key:0,label:"Hire this applicant",class:"zoom-animation-loop",color:"green",onClick:t[1]||(t[1]=_=>o.isHiringFunctionButton())}))]),a(f,{number:r.currentVideo.user_id,onHireStatus:o.HireStatus},null,8,["number","onHireStatus"])]),_:1})):(c(),u("div",w,[n("div",C,[n("div",I,[r.currentVideo?(c(),u("div",S,[n("div",B,p(r.currentVideo.title),1),n("div",H,p(r.currentVideo.description),1)])):m("",!0)],512),r.currentVideo?(c(),u("iframe",{key:0,src:o.formatUrl(r.currentVideo.link),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,F)):m("",!0)]),n("div",Q,[n("div",null,[a(s,{icon:"chevron_left",onClick:o.fetchPreviousVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"]),a(s,{label:"Hire now!",onClick:o.handleHireClick,class:"q-mx-xs zoom-animation-loop",rounded:"",color:"green"},null,8,["onClick"]),a(s,{icon:"chevron_right",onClick:o.fetchNextVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"])])])]))}var ee=y(V,[["render",U],["__scopeId","data-v-5cd0032a"]]);export{ee as default};
