import{Q as r}from"./QBtn.13c9c28e.js";import{Q as D,a as d}from"./QTr.f384a134.js";import{Q as C}from"./QTable.f863bf4e.js";import{Q as u}from"./QInput.98ef1ce8.js";import{Q}from"./QForm.280c210b.js";import{Q as p}from"./QCardSection.47b479df.js";import{Q as c}from"./QCard.cdee3ee2.js";import{Q as m}from"./QSelect.4738bd2c.js";import{Q as _}from"./QCardActions.78dd0818.js";import{Q as v}from"./QPage.27869402.js";import{_ as w,k as f,v as h,m as i,d as e,t as n,u as b,av as I,s as V,a4 as O,a5 as x,p as g}from"./index.d4268c22.js";import"./QIcon.183e8fa8.js";import"./use-size.fd56a178.js";import"./render.d29caea9.js";import"./QSpinner.54ae2b08.js";import"./dom.e83c55c8.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";import"./QSeparator.1100b827.js";import"./use-dark.57e59592.js";import"./QList.f1e6330b.js";import"./QMarkupTable.7032e167.js";import"./scroll.8fea1542.js";import"./QCheckbox.4be7c549.js";import"./private.use-form.445d09d5.js";import"./use-key-composition.3398aa85.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./QChip.99126795.js";import"./QItem.fbffd16a.js";import"./QItemLabel.6ae2f278.js";import"./position-engine.9300da22.js";import"./selection.34842c42.js";import"./use-model-toggle.833413c1.js";import"./use-tick.0d5c2332.js";import"./use-timeout.d19f8495.js";import"./use-prevent-scroll.61e86cc2.js";import"./rtl.276c3f1b.js";import"./format.054b8074.js";const S={data(){return{youtubeLink:"",title:"",description:"",isEditing:!1,editId:null,videos:[],dialogOpen:!1,deleteDialogOpen:!1,editDialogOpen:!1,columns:[{name:"actions",label:"Actions",align:"left",field:l=>l,sortable:!1},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"link",label:"Link",align:"left",field:"youtube_link",sortable:!1}],pagination:{rowsPerPage:10}}},methods:{openDialog(){this.dialogOpen=!0},closeDialog(){this.dialogOpen=!1,this.resetForm()},openEditDialog(l){this.youtubeLink=l.youtube_link,this.title=l.title,this.description=l.description,this.isEditing=!0,this.editId=l.id,this.dialogOpen=!0},confirmDeleteVideo(l){this.editId=l,this.deleteDialogOpen=!0},closeDeleteDialog(){this.deleteDialogOpen=!1},deleteVideoConfirmed(){const l="https://backend.ppark.online/api";this.$axios.delete(`${l}/user-videos/${this.editId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDeleteDialog()}).catch(o=>{console.error(o)})},confirmUpdateVideo(){this.updateVideo(),this.closeDialog()},fetchVideos(){const l="https://backend.ppark.online/api";this.$axios.get(`${l}/user-videos`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(o=>{this.videos=o.data}).catch(o=>{console.error(o)})},submitVideo(){const l="https://backend.ppark.online/api";this.$axios.post(`${l}/user-videos`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},updateVideo(){const l="https://backend.ppark.online/api";this.$axios.put(`${l}/user-videos/${this.editId}`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},resetForm(){this.youtubeLink="",this.title="",this.description="",this.isEditing=!1,this.editId=null}},mounted(){this.fetchVideos()}},k=l=>(O("data-v-17f1df24"),l=l(),x(),l),U=k(()=>g("h3",{style:{"font-weight":"600"}},"Video Management",-1)),B=k(()=>g("p",null,"Are you sure you want to delete this video?",-1)),E=k(()=>g("p",null,"Are you sure you want to edit this video?",-1));function A(l,o,L,T,a,s){return f(),h(v,{padding:""},{default:i(()=>[U,e(r,{color:"primary",onClick:s.openDialog,label:"Add Video"},null,8,["onClick"]),e(C,{rows:a.videos,columns:a.columns,"row-key":"id",pagination:a.pagination,class:"q-mt-lg"},{body:i(t=>[e(D,{props:t},{default:i(()=>[e(d,{"auto-width":""},{default:i(()=>[e(r,{flat:"",color:"primary",onClick:y=>s.openEditDialog(t.row)},{default:i(()=>[n("Edit")]),_:2},1032,["onClick"]),e(r,{flat:"",color:"negative",onClick:y=>s.confirmDeleteVideo(t.row.id)},{default:i(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024),e(d,null,{default:i(()=>[n(b(t.row.title),1)]),_:2},1024),e(d,null,{default:i(()=>[n(b(t.row.description),1)]),_:2},1024),e(d,null,{default:i(()=>[e(r,{color:"red",href:t.row.youtube_link,target:"_blank",icon:"play_circle","text-color":"white"},{default:i(()=>[n("Watch")]),_:2},1032,["href"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),e(m,{modelValue:a.dialogOpen,"onUpdate:modelValue":o[4]||(o[4]=t=>a.dialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[e(Q,{onSubmit:o[3]||(o[3]=I(t=>a.isEditing?s.updateVideo:s.submitVideo,["prevent"]))},{default:i(()=>[e(u,{modelValue:a.youtubeLink,"onUpdate:modelValue":o[0]||(o[0]=t=>a.youtubeLink=t),label:"YouTube Video Link",rules:[t=>t&&t.length>0||"YouTube link is required"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.title,"onUpdate:modelValue":o[1]||(o[1]=t=>a.title=t),label:"Video Title",maxlength:"25",counter:"",rules:[t=>t&&t.length<=25||"Title must be under 25 characters"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.description,"onUpdate:modelValue":o[2]||(o[2]=t=>a.description=t),label:"Video Description",type:"textarea",maxlength:"40",counter:"",rules:[t=>t.length<=40||"Description must be under 40 characters"]},null,8,["modelValue","rules"]),a.isEditing?V("",!0):(f(),h(r,{key:0,color:"primary",onClick:s.submitVideo,class:"q-mr-sm",label:"Submit",type:"submit"},null,8,["onClick"])),a.isEditing?(f(),h(r,{key:1,color:"secondary",onClick:s.updateVideo,label:"Update",class:"q-mr-sm",type:"submit"},null,8,["onClick"])):V("",!0),e(r,{color:"red",onClick:s.closeDialog,label:"Cancel"},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.deleteDialogOpen,"onUpdate:modelValue":o[5]||(o[5]=t=>a.deleteDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[B]),_:1}),e(_,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.deleteVideoConfirmed},{default:i(()=>[n("Yes, delete")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:s.closeDeleteDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.editDialogOpen,"onUpdate:modelValue":o[6]||(o[6]=t=>a.editDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[E]),_:1}),e(_,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.confirmUpdateVideo},{default:i(()=>[n("Yes, edit")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:l.closeEditDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var De=w(S,[["render",A],["__scopeId","data-v-17f1df24"]]);export{De as default};
