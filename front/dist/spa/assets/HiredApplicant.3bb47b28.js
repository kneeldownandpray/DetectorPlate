import{Q as r}from"./QBtn.6503b927.js";import{Q as k}from"./QCardSection.b2f04ae9.js";import{Q as v}from"./QIcon.c3f0630e.js";import{Q as D}from"./QTable.0d596f76.js";import{Q}from"./QSlideTransition.c05ade4a.js";import{Q as C}from"./QCard.d3cf51b6.js";import{Q as q}from"./QAvatar.0f56a7ba.js";import{Q as R}from"./QCardActions.8256de57.js";import{Q as w}from"./QDialog.ea73e085.js";import{Q as T}from"./QPage.cd2df875.js";import{a as b}from"./axios.ab682c6b.js";import{U as j}from"./UserProfile.7b84ec8c.js";import{_ as B,k as n,l as g,p as e,d as i,v as p,s as _,m as c,O as F,q as V,F as S,u as a,t as m,n as U,a4 as z,a5 as N}from"./index.ef86348d.js";import"./QSpinner.61c3e8e6.js";import"./use-size.955305ef.js";import"./dom.a0618220.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./render.0fa28f0b.js";import"./QSeparator.76e346ac.js";import"./use-dark.51648456.js";import"./QList.b595b344.js";import"./QMarkupTable.28295d05.js";import"./QSelect.dd8fb500.js";import"./use-key-composition.152c5e79.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./QChip.05695b8a.js";import"./QItem.0e72154d.js";import"./QItemLabel.8cc1f1e2.js";import"./position-engine.c1775d96.js";import"./selection.28dee7bf.js";import"./use-portal.50097725.js";import"./scroll.124b3ac8.js";import"./use-model-toggle.2da2574c.js";import"./use-tick.9dbc1409.js";import"./use-timeout.e83c5089.js";import"./rtl.276c3f1b.js";import"./private.use-form.71a42291.js";import"./format.054b8074.js";import"./QCheckbox.922543fe.js";import"./use-prevent-scroll.ddadc635.js";import"./QBanner.c4a5e154.js";import"./QImg.6384037a.js";const y="https://backend.parkease.online/api",P={name:"ApplicantManager",components:{UserProfile:j},data(){return{ListOfApplicants:[],dialog:!1,confirmDialog:!1,displayFullResume:!1,selectedResume:{},hideResumeContent:!1,currentTab:"hired",resumeColumns:[{name:"full_name",label:"Full Name",align:"left",field:"full_name"},{name:"profession",label:"Profession",align:"left",field:"profession"},{name:"address",label:"Address",align:"left",field:"address"}]}},methods:{BackFunction(){this.displayFullResume=!1,this.dialog=!1},async fetchApplicants(o){try{this.currentTab=o;const s=localStorage.getItem("access_token_employer");let f;switch(o){case"hired":f=await b.get(`${y}/display-hired-applicant`,{headers:{Authorization:`Bearer ${s}`}});break;case"pending":f=await b.get(`${y}/display-pending-applicant`,{headers:{Authorization:`Bearer ${s}`}});break;case"rejected":f=await b.get(`${y}/display-rejected-applicant`,{headers:{Authorization:`Bearer ${s}`}});break;default:return}Array.isArray(f.data.data)?this.ListOfApplicants=f.data.data.map(A=>({...A,showDetails:!1})):console.error("Expected an array but got:",f.data)}catch(s){console.error("Failed to fetch applicants:",s)}},async unlinkApplicant(o){try{const s=localStorage.getItem("access_token_employer");await b.delete(`${y}/hire/${o.applicant_id}/unlink-permanently`,{headers:{Authorization:`Bearer ${s}`}}),this.fetchApplicants(this.currentTab)}catch(s){console.error("Error unlinking applicant:",s)}},toggleApplicantDetails(o){o.showDetails=!o.showDetails},showDialog(o){o.approval_of_admin==0?(this.hideResumeContent=!0,this.displayFullResume=!0):this.hideResumeContent=!1,this.selectedResume=o.applicant.resume,this.dialog=!0},confirmUnlink(o){this.selectedResume=o.applicant.resume,this.confirmDialog=!0},unlinkConfirmed(){this.unlinkApplicant(this.ListOfApplicants.find(o=>o.applicant.id===this.selectedResume.user_id)),this.confirmDialog=!1}},mounted(){this.fetchApplicants(this.currentTab)}},d=o=>(z("data-v-df5dec60"),o=o(),N(),o),I={key:0},O={style:{display:"flex",padding:"3px","justify-content":"space-between"}},L={style:{"border-radius":"5px",overflow:"hidden"}},H={class:"q-gutter-md q-mb-sm",style:{display:"flex","justify-content":"flex-end"}},E=d(()=>e("div",{class:"text-h6"},"Manage Applicants",-1)),M={key:0,class:"q-mt-md q-text-center"},W=d(()=>e("p",null,"No applicants available.",-1)),Y=[W],G={class:"q-gutter-md",style:{display:"flex","justify-content":"space-between"}},J={style:{display:"flex","align-items":"center"}},K={key:0,class:"q-mt-sm"},X={class:"q-mt-sm"},Z={key:0},$={style:{display:"flex","align-items":"center","justify-content":"center"}},ee=d(()=>e("img",{src:"https://pbs.twimg.com/media/F4xcqSTaUAExkuh.jpg:large"},null,-1)),le=d(()=>e("strong",null,"Address:",-1)),te=d(()=>e("strong",null,"Birth Address:",-1)),se=d(()=>e("strong",null,"Height:",-1)),ie=d(()=>e("strong",null,"Weight:",-1)),oe=d(()=>e("strong",null,"Objectives:",-1)),ne=d(()=>e("strong",null,"Civil Status:",-1)),ae=d(()=>e("strong",null,"Religion:",-1)),re=d(()=>e("strong",null,"Nationality:",-1)),ce=d(()=>e("strong",null,"Contact No:",-1)),de=d(()=>e("strong",null,"Profession:",-1)),pe=d(()=>e("div",{class:"text-h6"},"Confirm Delete",-1)),me=d(()=>e("i",null,"You cannot undo this process!",-1));function ue(o,s,f,A,l,u){const x=F("UserProfile");return this.selectedResume.user_id&&this.displayFullResume==!0?(n(),g("div",I,[e("div",O,[i(r,{class:"q-ml-md q-mt-md",color:"primary",icon:"chevron_left",label:"back",onClick:s[0]||(s[0]=t=>u.BackFunction())}),l.currentTab=="hired"?(n(),p(r,{key:0,class:"q-mr-md q-mt-md",color:"green",disable:"",icon:"check",label:"Succesfully Hired!"})):_("",!0),l.currentTab=="pending"?(n(),p(r,{key:1,class:"q-mr-md q-mt-md",color:"amber",disable:"",icon:"hourglass_top",label:"Pending"})):_("",!0),l.currentTab=="rejected"?(n(),p(r,{key:2,class:"q-mr-md q-mt-md",color:"red",disable:"",icon:"cancel",label:"Rejected!"})):_("",!0)]),i(x,{number:this.selectedResume.user_id},null,8,["number"])])):(n(),p(T,{key:1,padding:""},{default:c(()=>[e("div",L,[e("div",H,[i(r,{onClick:s[1]||(s[1]=t=>u.fetchApplicants("hired")),label:"Hired",color:l.currentTab==="hired"?"primary":"green"},null,8,["color"]),i(r,{onClick:s[2]||(s[2]=t=>u.fetchApplicants("pending")),label:"Pending",color:l.currentTab==="pending"?"primary":"amber"},null,8,["color"]),i(r,{onClick:s[3]||(s[3]=t=>u.fetchApplicants("rejected")),label:"Rejected",color:l.currentTab==="rejected"?"primary":"red"},null,8,["color"])]),i(k,{class:"header-format-w"},{default:c(()=>[E]),_:1}),l.ListOfApplicants.length===0?(n(),g("div",M,Y)):_("",!0),(n(!0),g(S,null,V(l.ListOfApplicants,t=>(n(),p(C,{key:t.id,class:"my-card cursor-pointer"},{default:c(()=>[i(k,null,{default:c(()=>[e("div",G,[e("div",null,[t.approval_of_admin==1?(n(),p(v,{key:0,onClick:h=>u.toggleApplicantDetails(t),name:"account_circle",size:"50px"},null,8,["onClick"])):(n(),p(v,{key:1,name:"account_circle",size:"50px"})),t.approval_of_admin==1?(n(),p(r,{key:2,flat:"",onClick:h=>u.toggleApplicantDetails(t)},{default:c(()=>[m(a(t.applicant.first_name)+" "+a(t.applicant.last_name),1)]),_:2},1032,["onClick"])):(n(),p(r,{key:3,flat:""},{default:c(()=>[m(a(t.applicant.first_name)+" "+a(t.applicant.last_name),1)]),_:2},1024))]),e("div",J,a(t.applicant.resume.profession),1),e("div",null,[t.approval_of_admin==1?(n(),p(v,{key:0,name:"keyboard_arrow_up",class:U({"rotate-180":t.showDetails}),size:"40px",onClick:h=>u.toggleApplicantDetails(t)},null,8,["class","onClick"])):(n(),p(r,{key:1,icon:"play_circle","text-color":"primary",onClick:h=>u.showDialog(t),label:"Watch Video",color:"white",class:"q-mr-sm"},null,8,["onClick"]))])]),i(Q,null,{default:c(()=>[t.showDetails?(n(),g("div",K,[i(D,{rows:[t.applicant.resume],columns:l.resumeColumns,"row-key":"id","hide-pagination":""},null,8,["rows","columns"]),e("div",X,[i(r,{onClick:h=>u.showDialog(t),label:"Resume",color:"secondary",class:"q-mr-sm"},null,8,["onClick"]),l.currentTab==="hired"?(n(),p(r,{key:0,onClick:h=>u.confirmUnlink(t),label:"Unlink Permanently",color:"negative"},null,8,["onClick"])):_("",!0)])])):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),i(w,{modelValue:l.dialog,"onUpdate:modelValue":s[6]||(s[6]=t=>l.dialog=t),persistent:""},{default:c(()=>[i(C,null,{default:c(()=>[i(k,null,{default:c(()=>[l.hideResumeContent?_("",!0):(n(),g("div",Z,[e("div",$,[i(q,{size:"90px"},{default:c(()=>[ee]),_:1})]),e("h5",null,a(l.selectedResume.full_name),1),e("p",null,[le,m(" "+a(l.selectedResume.address),1)]),e("p",null,[te,m(" "+a(l.selectedResume.birth_address),1)]),e("p",null,[se,m(" "+a(l.selectedResume.height),1)]),e("p",null,[ie,m(" "+a(l.selectedResume.weight),1)]),e("p",null,[oe,m(" "+a(l.selectedResume.objectives),1)]),e("p",null,[ne,m(" "+a(l.selectedResume.civil_status),1)]),e("p",null,[ae,m(" "+a(l.selectedResume.religion),1)]),e("p",null,[re,m(" "+a(l.selectedResume.nationality),1)]),e("p",null,[ce,m(" "+a(l.selectedResume.contact_no),1)]),e("p",null,[de,m(" "+a(l.selectedResume.profession),1)])]))]),_:1}),i(R,null,{default:c(()=>[i(r,{onClick:s[4]||(s[4]=t=>l.dialog=!1),label:"Close",color:"primary"}),i(r,{onClick:s[5]||(s[5]=t=>l.displayFullResume=!0),label:"Full Resume & Videos",color:"green"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(w,{modelValue:l.confirmDialog,"onUpdate:modelValue":s[8]||(s[8]=t=>l.confirmDialog=t),persistent:""},{default:c(()=>[i(C,null,{default:c(()=>[i(k,{class:"header-format-w"},{default:c(()=>[e("div",null,[pe,e("p",null,"Are you sure you want to unlink "+a(l.selectedResume.full_name)+"?",1),me])]),_:1}),i(R,{align:"right"},{default:c(()=>[i(r,{flat:"",label:"No",color:"primary",onClick:s[7]||(s[7]=t=>l.confirmDialog=!1)}),i(r,{flat:"",label:"Yes",color:"negative",onClick:u.unlinkConfirmed},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}var il=B(P,[["render",ue],["__scopeId","data-v-df5dec60"]]);export{il as default};
