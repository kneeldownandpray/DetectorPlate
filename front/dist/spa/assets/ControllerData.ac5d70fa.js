import{Q as i}from"./QCardSection.b2f04ae9.js";import{Q as C}from"./QSelect.dd8fb500.js";import{Q as p}from"./QTd.b39ac00d.js";import{Q as u}from"./QBtn.6503b927.js";import{Q as h}from"./QTr.361c666b.js";import{Q as y}from"./QTable.0d596f76.js";import{Q as c}from"./QCard.d3cf51b6.js";import{Q as _}from"./QDialog.ea73e085.js";import{Q as k}from"./QPage.cd2df875.js";import{a as Q}from"./axios.ab682c6b.js";import{C as w}from"./ControllerData.da0b9eb8.js";import{_ as b,k as m,v as f,m as t,O as V,d as e,y as v,l as x,q as S,F as B,p as I,t as R,u as U}from"./index.ef86348d.js";import"./render.0fa28f0b.js";import"./use-key-composition.152c5e79.js";import"./QIcon.c3f0630e.js";import"./use-size.955305ef.js";import"./QSpinner.61c3e8e6.js";import"./uid.937d8ee7.js";import"./use-dark.51648456.js";import"./focus-manager.7cc6c8df.js";import"./QChip.05695b8a.js";import"./QItem.0e72154d.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./QItemLabel.8cc1f1e2.js";import"./position-engine.c1775d96.js";import"./selection.28dee7bf.js";import"./use-portal.50097725.js";import"./scroll.124b3ac8.js";import"./dom.a0618220.js";import"./use-model-toggle.2da2574c.js";import"./use-tick.9dbc1409.js";import"./use-timeout.e83c5089.js";import"./rtl.276c3f1b.js";import"./private.use-form.71a42291.js";import"./format.054b8074.js";import"./QSeparator.76e346ac.js";import"./QList.b595b344.js";import"./QMarkupTable.28295d05.js";import"./QCheckbox.922543fe.js";import"./use-prevent-scroll.ddadc635.js";import"./use-render-cache.3aae9b27.js";import"./QInput.d328d0ea.js";import"./QImg.6384037a.js";import"./QCardActions.8256de57.js";import"./FileSaver.min.e97ed772.js";const N={components:{ControllerData:w},data(){return{selectedDays:100,dayOptions:[7,14,30,60,100,500,700,1e3],reportData:[],loading:!1,showControllerDataDialog:!1,selectedDate:null}},mounted(){this.fetchDailyReport()},computed:{reversedReportData(){return[...this.reportData].reverse()},columns(){return[{name:"date",label:"Date",align:"center",field:"date"},{name:"inCount",label:"IN",align:"center",field:"inCount"},{name:"outCount",label:"OUT",align:"center",field:"outCount"},{name:"visitor",label:"Visitor",align:"center",field:"visitor"},{name:"park",label:"Park",align:"center",field:"park"},{name:"unknown",label:"Unknown",align:"center",field:"unknown"},{name:"actions",label:"Actions",align:"center"}]}},methods:{async fetchDailyReport(){this.loading=!0;try{const l=localStorage.getItem("access_token_employer"),a=localStorage.getItem("user");if(!a){console.error("User data is missing from localStorage.");return}const d=JSON.parse(a).id,o=await Q.get(`https://backend.parkease.online/api/vehicle-records/report/daily/${d}?days=${this.selectedDays}`,{headers:{Authorization:`Bearer ${l}`}});this.reportData=o.data.report}catch(l){console.error("Error fetching report:",l)}finally{this.loading=!1}},openControllerData(l){this.selectedDate=l,this.showControllerDataDialog=!0},closeControllerDataDialog(){this.showControllerDataDialog=!1}}},O=I("div",{class:"text-h6"},"Daily Vehicle Report",-1);function T(l,a,D,d,o,n){const g=V("ControllerData",!0);return m(),f(k,{padding:""},{default:t(()=>[e(c,null,{default:t(()=>[e(i,null,{default:t(()=>[O]),_:1}),e(i,{class:"q-gutter-md"},{default:t(()=>[e(C,{modelValue:o.selectedDays,"onUpdate:modelValue":[a[0]||(a[0]=r=>o.selectedDays=r),n.fetchDailyReport],options:o.dayOptions,label:"Select Days",outlined:"",dense:""},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(y,{flat:"",bordered:"",rows:n.reversedReportData,columns:n.columns,"row-key":"date",loading:o.loading},{body:t(r=>[e(h,{props:r,style:v(r.rowIndex===0?"background-color: lightblue;":"")},{default:t(()=>[(m(!0),x(B,null,S(n.columns,s=>(m(),f(p,{key:s.name},{default:t(()=>[R(U(r.row[s.field]),1)]),_:2},1024))),128)),e(p,null,{default:t(()=>[e(u,{label:"Views",color:"primary",dense:"",onClick:s=>n.openControllerData(r.row.date)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props","style"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1}),e(_,{modelValue:o.showControllerDataDialog,"onUpdate:modelValue":a[1]||(a[1]=r=>o.showControllerDataDialog=r),persistent:!0,maximized:!0,style:{zIndex:"11111"}},{default:t(()=>[e(c,null,{default:t(()=>[e(i,null,{default:t(()=>[e(u,{color:"red",label:"Close",onClick:n.closeControllerDataDialog},null,8,["onClick"])]),_:1}),e(i,null,{default:t(()=>[e(g,{date2:this.selectedDate},null,8,["date2"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Se=b(N,[["render",T]]);export{Se as default};
