import{Q as s}from"./QBtn.13c9c28e.js";import{Q as g}from"./QPage.27869402.js";import{a as l}from"./axios.ab682c6b.js";import{U as v}from"./UserProfile.fc1cb380.js";import{_ as y,k as c,v as d,m as k,l as u,p as n,u as h,s as m,d as a,O as x}from"./index.d4268c22.js";import"./QIcon.183e8fa8.js";import"./use-size.fd56a178.js";import"./render.d29caea9.js";import"./QSpinner.54ae2b08.js";import"./dom.e83c55c8.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";import"./QBanner.aa02c22c.js";import"./use-dark.57e59592.js";import"./QCardSection.47b479df.js";import"./QImg.3e0c5a33.js";import"./use-timeout.d19f8495.js";import"./QItem.fbffd16a.js";import"./QList.f1e6330b.js";import"./QCard.cdee3ee2.js";const p="https://backend.ppark.online/api",V={components:{UserProfile:v},data(){return{currentVideo:null,videoQueue:[],currentIndex:-1,isFetching:!1,hiringpopup:!1,hiringStatus:null}},computed:{hiringStatusComputed(){return this.hiringStatus}},methods:{async isHiringFunctionButton(){try{const e=localStorage.getItem("access_token_employer"),t=await l.post(`${p}/hire`,{applicant_id:this.currentVideo.user_id},{headers:{Authorization:`Bearer ${e}`}})}catch(e){console.error("Error:",e),e.response&&console.error("Response data:",e.response.data)}this.hiringStatus=!0},HireStatus(e){this.hiringStatus=e},async fetchInitialVideo(){try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${p}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex=0,this.currentVideo=i,this.updateVideo())}catch(e){console.error("Error fetching initial video:",e)}},async fetchNextVideo(){if(!this.isFetching){this.isFetching=!0;try{const e=localStorage.getItem("access_token_employer"),i=(await l.get(`${p}/next-video`,{headers:{Authorization:`Bearer ${e}`}})).data.video;i&&(this.videoQueue.push(i),this.currentIndex++,this.updateVideo())}catch(e){console.error("Error fetching next video:",e)}finally{this.isFetching=!1}}},async fetchPreviousVideo(){if(!this.isFetching){this.isFetching=!0;try{this.currentIndex>0&&(this.currentIndex--,this.updateVideo())}catch(e){console.error("Error fetching previous video:",e)}finally{this.isFetching=!1}}},updateVideo(){this.currentIndex>=0&&this.currentIndex<this.videoQueue.length&&(this.currentVideo=this.videoQueue[this.currentIndex],this.$nextTick(()=>{}))},formatUrl(e){return`https://www.youtube.com/embed/${new URL(e).searchParams.get("v")}`},handleHireClick(){this.hiringpopup=!0}},watch:{hiringStatus(e){}},mounted(){this.fetchInitialVideo()}},b={class:"q-mt-md q-ml-md q-mr-md",style:{display:"flex",padding:"3px","justify-content":"space-between"}},w={key:1,class:"video-wrapper"},C={class:"video-container"},I={class:"detail-container",ref:"detailContainer",style:{"flex-direction":"column"}},S={key:0,style:{"background-color":"transparent",color:"white",padding:"5px"}},B={class:"video-title"},H={class:"video-description"},F=["src"],Q={class:"button-container",style:{"flex-direction":"column"}};function U(e,t,i,q,r,o){const f=x("UserProfile");return r.hiringpopup?(c(),d(g,{key:0},{default:k(()=>[n("div",b,[a(s,{label:"back",onClick:t[0]||(t[0]=_=>r.hiringpopup=!1)}),o.hiringStatusComputed?(c(),d(s,{key:1,label:"Requested to admin",color:"lightgray",disable:""})):(c(),d(s,{key:0,label:"Hire this applicant",class:"zoom-animation-loop",color:"green",onClick:t[1]||(t[1]=_=>o.isHiringFunctionButton())}))]),a(f,{number:r.currentVideo.user_id,onHireStatus:o.HireStatus},null,8,["number","onHireStatus"])]),_:1})):(c(),u("div",w,[n("div",C,[n("div",I,[r.currentVideo?(c(),u("div",S,[n("div",B,h(r.currentVideo.title),1),n("div",H,h(r.currentVideo.description),1)])):m("",!0)],512),r.currentVideo?(c(),u("iframe",{key:0,src:o.formatUrl(r.currentVideo.link),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,F)):m("",!0)]),n("div",Q,[n("div",null,[a(s,{icon:"chevron_left",onClick:o.fetchPreviousVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"]),a(s,{label:"Hire now!",onClick:o.handleHireClick,class:"q-mx-xs zoom-animation-loop",rounded:"",color:"green"},null,8,["onClick"]),a(s,{icon:"chevron_right",onClick:o.fetchNextVideo,class:"q-mx-xs",round:"",dense:""},null,8,["onClick"])])])]))}var ee=y(V,[["render",U],["__scopeId","data-v-5cd0032a"]]);export{ee as default};
