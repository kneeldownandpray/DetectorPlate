import{Q as S}from"./QSpinner.54ae2b08.js";import{Q as D}from"./QBanner.aa02c22c.js";import{Q as c}from"./QCardSection.47b479df.js";import{Q as b}from"./QImg.3e0c5a33.js";import{a as k,Q as p}from"./QItem.fbffd16a.js";import{Q as w}from"./QList.f1e6330b.js";import{Q as M}from"./QBtn.13c9c28e.js";import{Q}from"./QCard.cdee3ee2.js";import{a as g}from"./axios.ab682c6b.js";import{j as V,_ as $,k as a,l as u,v as d,s as n,d as m,m as l,t as i,u as s,p as t,F as f,q as y,a4 as I,a5 as j}from"./index.d4268c22.js";const v="https://backend.ppark.online/api",B=V({name:"defaultpage",data(){return{resumeData:null,loading:!0,errorMessage:"",showMoreVideos:!1}},mounted(){this.fetchStatus()},methods:{async fetchStatus(){try{const e=localStorage.getItem("access_token_employer"),h=await g.post(`${v}/hire-checker/${this.number}`,{},{headers:{Authorization:`Bearer ${e}`}});this.HireStatus=h.data.is_hired,console.log(this.HireStatus),this.fetchResume(),this.$emit("HireStatus",this.HireStatus)}catch{this.loading=!1}},async fetchResume(){try{const e=localStorage.getItem("access_token_employer");if(!e){this.errorMessage="No authentication token found";return}if(this.HireStatus){const h=await g.post(`${v}/resumes/user/${this.number}`,{},{headers:{Authorization:`Bearer ${e}`}});this.resumeData=h.data}else{console.log("video");const h=await g.post(`${v}/resumes/video/${this.number}`,{},{headers:{Authorization:`Bearer ${e}`}});this.resumeData=h.data}this.loading=!1}catch(e){this.errorMessage="Failed to load resume data",this.loading=!1,console.error("Error fetching resume:",e)}this.HireStatus=!0},extractVideoId(e){const h=/(?:https?:\/\/)?(?:www\.)?youtube\.com\/(?:watch\?v=|embed\/|v\/|.*v=)?([^&\n?#]+)/,_=e.match(h);return _?_[1]:""},toggleShowMore(){this.showMoreVideos=!this.showMoreVideos,this.showMoreVideos&&this.resumeData.user_videos.length<=5&&(this.showMoreVideos=!1)}},props:{number:{type:Number,required:!0}}}),r=e=>(I("data-v-58667787"),e=e(),j(),e),H={class:"q-pa-md"},q={key:1},C={key:0,style:{display:"flex","justify-content":"space-between"}},N={class:"b3-title q-mb-md q-mt-sm"},E=r(()=>t("strong",null,"Address:",-1)),A=r(()=>t("strong",null,"Birth Address:",-1)),U=r(()=>t("strong",null,"Objectives:",-1)),F=r(()=>t("strong",null,"Nationality:",-1)),P=r(()=>t("strong",null,"Height:",-1)),R=r(()=>t("strong",null,"Weight:",-1)),W=r(()=>t("strong",null,"Civil Status:",-1)),z=r(()=>t("strong",null,"Religion:",-1)),O=r(()=>t("h5",null,"Educational Attainments",-1)),L=r(()=>t("br",null,null,-1)),T=r(()=>t("strong",null,"Period:",-1)),J={key:0},K=r(()=>t("strong",null,"Course:",-1)),X=r(()=>t("strong",null,"Major:",-1)),Y={key:1},G=r(()=>t("strong",null,"Strand (optional for K12):",-1)),Z=r(()=>t("strong",null,"Major:",-1)),x=r(()=>t("h5",null,"Work Experiences",-1)),ee=r(()=>t("strong",null,"Start Date:",-1)),te=r(()=>t("strong",null,"End Date:",-1)),se=r(()=>t("h5",null,"User Videos",-1)),oe={class:"video-container responsive-video"},re=["src"],ae={class:"video-title q-mt-sm"},ie={class:"video-description"};function le(e,h,_,ne,ue,de){return a(),u("div",H,[e.loading?(a(),d(S,{key:0,color:"primary"})):n("",!0),e.errorMessage?(a(),u("div",q,[m(D,{dense:"",class:"bg-negative text-white q-px-lg q-py-sm"},{default:l(()=>[i(s(e.errorMessage),1)]),_:1})])):n("",!0),e.resumeData&&!e.loading?(a(),d(Q,{key:2,class:"q-ma-xs"},{default:l(()=>[this.HireStatus?n("",!0):(a(),u("div",C,[this.HireStatus?n("",!0):(a(),d(c,{key:0},{default:l(()=>[t("p",N,s(e.resumeData.full_name),1),t("p",null,[E,i(" "+s(e.resumeData.address),1)]),t("p",null,[A,i(" "+s(e.resumeData.birth_address),1)]),t("p",null,[U,i(" "+s(e.resumeData.objectives),1)]),t("p",null,[F,i(" "+s(e.resumeData.nationality),1)]),t("p",null,[P,i(" "+s(e.resumeData.height)+" cm",1)]),t("p",null,[R,i(" "+s(e.resumeData.weight)+" kg",1)]),t("p",null,[W,i(" "+s(e.resumeData.civil_status),1)]),t("p",null,[z,i(" "+s(e.resumeData.religion),1)])]),_:1})),m(c,null,{default:l(()=>[m(b,{src:"https://fastly.picsum.photos/id/186/500/300.jpg?hmac=dYjINOiJPmekuXN_3Uf82u5IWRl257xOi2cFV_E8Fwk","spinner-color":"white",style:{height:"140px","max-width":"150px"}})]),_:1})])),this.HireStatus?n("",!0):(a(),d(c,{key:1},{default:l(()=>[O,m(w,null,{default:l(()=>[(a(!0),u(f,null,y(e.resumeData.educational_attainments,o=>(a(),d(k,{key:o.id},{default:l(()=>[m(p,null,{default:l(()=>[t("p",null,[t("strong",null,s(o.level)+":",1),i(" "+s(o.institution)+" ",1),L,T,i(" "+s(o.period),1)]),o.level==="Tertiary"?(a(),u("p",J,[K,i(" "+s(o.course)+" | ",1),X,i(" "+s(o.major),1)])):n("",!0),o.level==="Secondary"?(a(),u("p",Y,[G,i(" "+s(o.course)+" | ",1),Z,i(" "+s(o.major),1)])):n("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),this.HireStatus?n("",!0):(a(),d(c,{key:2},{default:l(()=>[x,m(w,null,{default:l(()=>[(a(!0),u(f,null,y(e.resumeData.work_experiences,o=>(a(),d(k,{key:o.id},{default:l(()=>[m(p,null,{default:l(()=>[t("p",null,[t("strong",null,s(o.company_name)+":",1),i(" "+s(o.position),1)]),t("p",null,s(o.job_description),1),t("p",null,[ee,i(" "+s(o.start_date)+" | ",1),te,i(" "+s(o.end_date),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})),e.resumeData.user_videos&&e.resumeData.user_videos.length?(a(),d(c,{key:3},{default:l(()=>[se,(a(!0),u(f,null,y(e.showMoreVideos?e.resumeData.user_videos:e.resumeData.user_videos.slice(0,3),(o,he)=>(a(),u("div",{class:"q-mb-lg",key:o.id},[m(p,{class:"video-info-wrapper"},{default:l(()=>[t("div",oe,[t("iframe",{src:`https://www.youtube.com/embed/${e.extractVideoId(o.youtube_link)}`,frameborder:"0",allowfullscreen:"",class:"video-iframe"},null,8,re)]),t("div",ae,[t("strong",null,s(o.title),1)]),t("div",ie,s(o.description),1)]),_:2},1024)]))),128)),e.resumeData.user_videos.length>3&&!e.showMoreVideos?(a(),d(M,{key:0,onClick:e.toggleShowMore,label:"Watch More Videos",color:"primary"},null,8,["onClick"])):n("",!0)]),_:1})):n("",!0)]),_:1})):n("",!0)])}var Se=$(B,[["render",le],["__scopeId","data-v-58667787"]]);export{Se as U};
