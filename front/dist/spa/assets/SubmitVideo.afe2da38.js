import{Q as r}from"./QBtn.6503b927.js";import{Q as d}from"./QTd.b39ac00d.js";import{Q as D}from"./QTr.361c666b.js";import{Q as C}from"./QTable.0d596f76.js";import{Q as u}from"./QInput.d328d0ea.js";import{Q}from"./QForm.5957e0e8.js";import{Q as p}from"./QCardSection.b2f04ae9.js";import{Q as c}from"./QCard.d3cf51b6.js";import{Q as m}from"./QDialog.ea73e085.js";import{Q as _}from"./QCardActions.8256de57.js";import{Q as w}from"./QPage.cd2df875.js";import{_ as v,k as f,v as h,m as i,d as e,t as n,u as b,ay as I,s as V,a4 as O,a5 as x,p as g}from"./index.ef86348d.js";import"./QIcon.c3f0630e.js";import"./use-size.955305ef.js";import"./render.0fa28f0b.js";import"./QSpinner.61c3e8e6.js";import"./dom.a0618220.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./QSeparator.76e346ac.js";import"./use-dark.51648456.js";import"./QList.b595b344.js";import"./QMarkupTable.28295d05.js";import"./QSelect.dd8fb500.js";import"./use-key-composition.152c5e79.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./QChip.05695b8a.js";import"./QItem.0e72154d.js";import"./QItemLabel.8cc1f1e2.js";import"./position-engine.c1775d96.js";import"./selection.28dee7bf.js";import"./use-portal.50097725.js";import"./scroll.124b3ac8.js";import"./use-model-toggle.2da2574c.js";import"./use-tick.9dbc1409.js";import"./use-timeout.e83c5089.js";import"./rtl.276c3f1b.js";import"./private.use-form.71a42291.js";import"./format.054b8074.js";import"./QCheckbox.922543fe.js";import"./use-prevent-scroll.ddadc635.js";const S={data(){return{youtubeLink:"",title:"",description:"",isEditing:!1,editId:null,videos:[],dialogOpen:!1,deleteDialogOpen:!1,editDialogOpen:!1,columns:[{name:"actions",label:"Actions",align:"left",field:l=>l,sortable:!1},{name:"title",label:"Title",align:"left",field:"title",sortable:!0},{name:"description",label:"Description",align:"left",field:"description",sortable:!0},{name:"link",label:"Link",align:"left",field:"youtube_link",sortable:!1}],pagination:{rowsPerPage:10}}},methods:{openDialog(){this.dialogOpen=!0},closeDialog(){this.dialogOpen=!1,this.resetForm()},openEditDialog(l){this.youtubeLink=l.youtube_link,this.title=l.title,this.description=l.description,this.isEditing=!0,this.editId=l.id,this.dialogOpen=!0},confirmDeleteVideo(l){this.editId=l,this.deleteDialogOpen=!0},closeDeleteDialog(){this.deleteDialogOpen=!1},deleteVideoConfirmed(){const l="https://backend.parkease.online/api";this.$axios.delete(`${l}/user-videos/${this.editId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDeleteDialog()}).catch(o=>{console.error(o)})},confirmUpdateVideo(){this.updateVideo(),this.closeDialog()},fetchVideos(){const l="https://backend.parkease.online/api";this.$axios.get(`${l}/user-videos`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(o=>{this.videos=o.data}).catch(o=>{console.error(o)})},submitVideo(){const l="https://backend.parkease.online/api";this.$axios.post(`${l}/user-videos`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},updateVideo(){const l="https://backend.parkease.online/api";this.$axios.put(`${l}/user-videos/${this.editId}`,{youtube_link:this.youtubeLink,title:this.title,description:this.description},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(()=>{this.fetchVideos(),this.closeDialog()}).catch(o=>{console.error(o)})},resetForm(){this.youtubeLink="",this.title="",this.description="",this.isEditing=!1,this.editId=null}},mounted(){this.fetchVideos()}},k=l=>(O("data-v-17f1df24"),l=l(),x(),l),U=k(()=>g("h3",{style:{"font-weight":"600"}},"Video Management",-1)),B=k(()=>g("p",null,"Are you sure you want to delete this video?",-1)),E=k(()=>g("p",null,"Are you sure you want to edit this video?",-1));function A(l,o,L,T,a,s){return f(),h(w,{padding:""},{default:i(()=>[U,e(r,{color:"primary",onClick:s.openDialog,label:"Add Video"},null,8,["onClick"]),e(C,{rows:a.videos,columns:a.columns,"row-key":"id",pagination:a.pagination,class:"q-mt-lg"},{body:i(t=>[e(D,{props:t},{default:i(()=>[e(d,{"auto-width":""},{default:i(()=>[e(r,{flat:"",color:"primary",onClick:y=>s.openEditDialog(t.row)},{default:i(()=>[n("Edit")]),_:2},1032,["onClick"]),e(r,{flat:"",color:"negative",onClick:y=>s.confirmDeleteVideo(t.row.id)},{default:i(()=>[n("Delete")]),_:2},1032,["onClick"])]),_:2},1024),e(d,null,{default:i(()=>[n(b(t.row.title),1)]),_:2},1024),e(d,null,{default:i(()=>[n(b(t.row.description),1)]),_:2},1024),e(d,null,{default:i(()=>[e(r,{color:"red",href:t.row.youtube_link,target:"_blank",icon:"play_circle","text-color":"white"},{default:i(()=>[n("Watch")]),_:2},1032,["href"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"]),e(m,{modelValue:a.dialogOpen,"onUpdate:modelValue":o[4]||(o[4]=t=>a.dialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[e(Q,{onSubmit:o[3]||(o[3]=I(t=>a.isEditing?s.updateVideo:s.submitVideo,["prevent"]))},{default:i(()=>[e(u,{modelValue:a.youtubeLink,"onUpdate:modelValue":o[0]||(o[0]=t=>a.youtubeLink=t),label:"YouTube Video Link",rules:[t=>t&&t.length>0||"YouTube link is required"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.title,"onUpdate:modelValue":o[1]||(o[1]=t=>a.title=t),label:"Video Title",maxlength:"25",counter:"",rules:[t=>t&&t.length<=25||"Title must be under 25 characters"]},null,8,["modelValue","rules"]),e(u,{modelValue:a.description,"onUpdate:modelValue":o[2]||(o[2]=t=>a.description=t),label:"Video Description",type:"textarea",maxlength:"40",counter:"",rules:[t=>t.length<=40||"Description must be under 40 characters"]},null,8,["modelValue","rules"]),a.isEditing?V("",!0):(f(),h(r,{key:0,color:"primary",onClick:s.submitVideo,class:"q-mr-sm",label:"Submit",type:"submit"},null,8,["onClick"])),a.isEditing?(f(),h(r,{key:1,color:"secondary",onClick:s.updateVideo,label:"Update",class:"q-mr-sm",type:"submit"},null,8,["onClick"])):V("",!0),e(r,{color:"red",onClick:s.closeDialog,label:"Cancel"},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.deleteDialogOpen,"onUpdate:modelValue":o[5]||(o[5]=t=>a.deleteDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[B]),_:1}),e(_,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.deleteVideoConfirmed},{default:i(()=>[n("Yes, delete")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:s.closeDeleteDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m,{modelValue:a.editDialogOpen,"onUpdate:modelValue":o[6]||(o[6]=t=>a.editDialogOpen=t)},{default:i(()=>[e(c,{class:"custom-dialog"},{default:i(()=>[e(p,null,{default:i(()=>[E]),_:1}),e(_,null,{default:i(()=>[e(r,{color:"primary",class:"q-mr-sm",onClick:s.confirmUpdateVideo},{default:i(()=>[n("Yes, edit")]),_:1},8,["onClick"]),e(r,{color:"red",onClick:l.closeEditDialog},{default:i(()=>[n("Cancel")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var we=v(S,[["render",A],["__scopeId","data-v-17f1df24"]]);export{we as default};
