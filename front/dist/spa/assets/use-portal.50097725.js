import{c as p,z as v,r as g,a as b,aa as Q,h,ab as w,ac as C,ad as _}from"./index.ef86348d.js";import{r as $,b as q}from"./focus-manager.7cc6c8df.js";import{g as r}from"./vm.bd5b438f.js";const E={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function M(e,t=()=>{},a=()=>{}){return{transitionProps:p(()=>{const o=`q-transition--${e.transitionShow||t()}`,n=`q-transition--${e.transitionHide||a()}`;return{appear:!0,enterFromClass:`${o}-enter-from`,enterActiveClass:`${o}-enter-active`,enterToClass:`${o}-enter-to`,leaveFromClass:`${n}-leave-from`,leaveActiveClass:`${n}-leave-active`,leaveToClass:`${n}-leave-to`}}),transitionStyle:p(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const s=[];function N(e){return s.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function D(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return r(e)}else if(e.__qPortal===!0){const a=r(e);return a!==void 0&&a.$options.name==="QPopupProxy"?(e.hide(t),a):e}e=r(e)}while(e!=null)}function O(e,t,a){for(;a!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(a--,e.$options.name==="QMenu"){e=D(e,t);continue}e.hide(t)}e=r(e)}}const F=v({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function S(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function j(e,t,a,o){const n=g(!1),i=g(!1);let l=null;const u={},c=o==="dialog"&&S(e);function m(f){if(f===!0){$(u),i.value=!0;return}i.value=!1,n.value===!1&&(c===!1&&l===null&&(l=C(!1,o)),n.value=!0,s.push(e.proxy),q(u))}function d(f){if(i.value=!1,f!==!0)return;$(u),n.value=!1;const P=s.indexOf(e.proxy);P!==-1&&s.splice(P,1),l!==null&&(_(l),l=null)}return b(()=>{d(!0)}),e.proxy.__qPortal=!0,Q(e.proxy,"contentEl",()=>t.value),{showPortal:m,hidePortal:d,portalIsActive:n,portalIsAccessible:i,renderPortal:()=>c===!0?a():n.value===!0?[h(w,{to:l},h(F,a))]:void 0}}export{M as a,j as b,D as c,O as d,N as g,s as p,E as u};
