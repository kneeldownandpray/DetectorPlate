import{Q as f}from"./QSeparator.76e346ac.js";import{Q as h}from"./QCardSection.b2f04ae9.js";import{Q as k}from"./QCard.d3cf51b6.js";import{a as q,Q as w}from"./QItem.0e72154d.js";import{Q as _}from"./QBtn.6503b927.js";import{Q as D}from"./QList.b595b344.js";import{Q as R}from"./QSelect.dd8fb500.js";import{Q as d}from"./QInput.d328d0ea.js";import{Q as C}from"./QCardActions.8256de57.js";import{Q as x}from"./QDialog.ea73e085.js";import{Q as P}from"./QPage.cd2df875.js";import{C as E}from"./ClosePopup.d7278589.js";import{a as V}from"./axios.ab682c6b.js";import{C as W}from"./CreateResume.6cebca5e.js";import{_ as B,k as m,v as c,m as i,O as j,l as g,d as l,p as e,u as r,t as n,F as Q,q as S,s as y,I as A}from"./index.ef86348d.js";import"./use-dark.51648456.js";import"./render.0fa28f0b.js";import"./use-router-link.5a2b0965.js";import"./vm.bd5b438f.js";import"./QIcon.c3f0630e.js";import"./use-size.955305ef.js";import"./QSpinner.61c3e8e6.js";import"./dom.a0618220.js";import"./use-key-composition.152c5e79.js";import"./uid.937d8ee7.js";import"./focus-manager.7cc6c8df.js";import"./QChip.05695b8a.js";import"./QItemLabel.8cc1f1e2.js";import"./position-engine.c1775d96.js";import"./selection.28dee7bf.js";import"./use-portal.50097725.js";import"./scroll.124b3ac8.js";import"./use-model-toggle.2da2574c.js";import"./use-tick.9dbc1409.js";import"./use-timeout.e83c5089.js";import"./rtl.276c3f1b.js";import"./private.use-form.71a42291.js";import"./format.054b8074.js";import"./use-prevent-scroll.ddadc635.js";const b="https://backend.parkease.online/api",I={name:"ResumePage",data(){return{resume:null,showWorkDialog:!1,showEducationDialog:!1,work:{company_name:"",company_address:"",position:"",start_date:"",end_date:"",job_description:""},education:{level:"",institution:"",period:"",course:"",major:""}}},components:{CreateResume:W},computed:{showEducationButton(){return this.resume&&this.resume.educational_attainments.length>0},showWorkButton(){return this.resume&&this.resume.work_experiences.length>0}},methods:{async fetchResume(){try{const a=localStorage.getItem("access_token_employer"),s=await V.get(`${b}/resume`,{headers:{Authorization:`Bearer ${a}`}});this.resume=s.data}catch(a){console.error("Error fetching resume:",a)}},handleResumeSaved(){this.fetchResume()},calculateAge(a){const s=new Date,p=new Date(a);let v=s.getFullYear()-p.getFullYear();const o=s.getMonth()-p.getMonth();return(o<0||o===0&&s.getDate()<p.getDate())&&v--,v},openWorkDialog(){this.work={company_name:"",company_address:"",position:"",start_date:"",end_date:"",job_description:""},this.showWorkDialog=!0},openEducationDialog(){this.education={level:"",institution:"",period:"",course:"",major:""},this.showEducationDialog=!0},async addWorkExperience(){try{const a=localStorage.getItem("access_token_employer"),s=await V.post(`${b}/work-experiences`,{resume_id:this.resume.id,...this.work},{headers:{Authorization:`Bearer ${a}`}});this.resume.work_experiences.push(s.data),this.showWorkDialog=!1}catch(a){console.error("Error adding work experience:",a)}},async addEducationalAttainment(){try{const a=localStorage.getItem("access_token_employer"),s=await V.post(`${b}/educational-attainments`,{resume_id:this.resume.id,...this.education},{headers:{Authorization:`Bearer ${a}`}});this.resume.educational_attainments.push(s.data),this.showEducationDialog=!1}catch(a){console.error("Error adding educational attainment:",a)}},periodRule(a){if(!a)return"Period is required";const s=/^[0-9]{4}\s*to\s*[0-9]{4}$/,p=/^(?:[A-Za-z]+ \d{4}|[A-Za-z]+ \d{1,2} \d{4})$/;return s.test(a)||p.test(a)?!0:"Invalid period format"}},mounted(){this.fetchResume()}},N={key:0},T=e("div",{class:"text-h3 q-mb-md"},[e("strong",null,"CV or Resume")],-1),z={class:"text-h6"},F=e("strong",{class:"q-mr-sm"},"Profession:",-1),L=e("strong",{class:"q-mr-sm"},"Current Address:",-1),M=e("strong",{class:"q-mr-sm"},"Email:",-1),O=e("strong",{class:"q-mr-sm"},"Contact Number:",-1),Y=e("div",{class:"text-h6 q-mt-md"},[e("b",null,"User Details")],-1),Z=e("strong",{class:"q-mr-sm"},"Civil Status:",-1),G=e("strong",{class:"q-mr-sm"},"Religion:",-1),H=e("strong",{class:"q-mr-sm"},"Nationality:",-1),J=e("strong",{class:"q-mr-sm"},"Birth Address:",-1),K=e("strong",{class:"q-mr-sm"},"Height:",-1),X=e("strong",{class:"q-mr-sm"},"Weight:",-1),$=e("strong",{class:"q-mr-sm"},"Gender:",-1),ee=e("strong",{class:"q-mr-sm"},"Birthday:",-1),oe=e("strong",{class:"q-mr-sm"},"Age:",-1),te=e("div",{class:"text-h6 q-mb-md"},"Educational Attainments",-1),se=e("strong",{class:"q-mr-sm"},"Level:",-1),le=e("strong",{class:"q-mr-sm"},"Institution:",-1),re={key:0},ne=e("strong",{class:"q-mr-sm"},"Course:",-1),ie={key:1},ae=e("strong",{class:"q-mr-sm"},"Major:",-1),me=e("strong",{class:"q-mr-sm"},"Period:",-1),de=e("div",{class:"text-h6 q-mb-md"},"Work Experiences",-1),ue=e("strong",{class:"q-mr-sm"},"Company:",-1),ce=e("strong",{class:"q-mr-sm"},"Address:",-1),pe=e("strong",{class:"q-mr-sm"},"Position:",-1),_e=e("strong",{class:"q-mr-sm"},"Start Date:",-1),he=e("strong",{class:"q-mr-sm"},"End Date:",-1),ge=e("strong",{class:"q-mr-sm"},"Description:",-1),ye=e("div",{class:"text-h6"},"Add Educational Attainment",-1),ve=e("div",{class:"text-h6"},"Work Experience",-1);function fe(a,s,p,v,o,u){const U=j("create-resume");return m(),c(P,{padding:""},{default:i(()=>[o.resume?(m(),g("div",N,[T,l(k,{flat:"",bordered:"",class:"q-mb-lg"},{default:i(()=>[l(h,null,{default:i(()=>[e("div",z,r(o.resume.full_name),1),e("div",null,[F,n(" "+r(o.resume.profession),1)]),e("div",null,[L,n(" "+r(o.resume.address),1)]),e("div",null,[M,n(" "+r(o.resume.user.email),1)]),e("div",null,[O,n(" "+r(o.resume.contact_no),1)]),Y,l(f,{class:"q-mb-sm"}),e("div",null,[Z,n(r(o.resume.civil_status),1)]),e("div",null,[G,n(r(o.resume.religion),1)]),e("div",null,[H,n(r(o.resume.nationality),1)]),e("div",null,[J,n(r(o.resume.birth_address),1)]),e("div",null,[K,n(r(o.resume.height)+" ft.",1)]),e("div",null,[X,n(r(o.resume.weight)+" kg.",1)]),e("div",null,[$,n(" "+r(o.resume.user.gender),1)]),e("div",null,[ee,n(" "+r(o.resume.user.birthday),1)]),e("div",null,[oe,n(" "+r(u.calculateAge(o.resume.user.birthday)),1)])]),_:1})]),_:1}),l(f),te,l(D,{bordered:"",class:"q-mb-lg"},{default:i(()=>[(m(!0),g(Q,null,S(o.resume.educational_attainments,t=>(m(),c(q,{key:t.id},{default:i(()=>[l(w,null,{default:i(()=>[e("div",null,[se,n(" "+r(t.level),1)]),e("div",null,[le,n(" "+r(t.institution),1)]),t.level!=="Primary"&&(t.level==="Secondary"||t.level==="Tertiary")?(m(),g("div",re,[ne,n(" "+r(t.course),1)])):y("",!0),t.level!=="Primary"&&(t.level==="Secondary"||t.level==="Tertiary")?(m(),g("div",ie,[ae,n(" "+r(t.major),1)])):y("",!0),e("div",null,[me,n(" "+r(t.period),1)])]),_:2},1024)]),_:2},1024))),128)),l(_,{class:"q-mt-sm q-mb-sm q-ml-sm",label:"Educational Attainment",onClick:u.openEducationDialog,color:"primary",icon:"add"},null,8,["onClick"])]),_:1}),l(f),de,l(D,{bordered:""},{default:i(()=>[(m(!0),g(Q,null,S(o.resume.work_experiences,t=>(m(),c(q,{key:t.id},{default:i(()=>[l(w,null,{default:i(()=>[e("div",null,[ue,n(" "+r(t.company_name),1)]),e("div",null,[ce,n(" "+r(t.company_address),1)]),e("div",null,[pe,n(" "+r(t.position),1)]),e("div",null,[_e,n(" "+r(t.start_date),1)]),e("div",null,[he,n(" "+r(t.end_date),1)]),e("div",null,[ge,n(" "+r(t.job_description),1)])]),_:2},1024)]),_:2},1024))),128)),l(_,{class:"q-mt-sm q-mb-sm q-ml-sm",label:"Add Work Experience",onClick:u.openWorkDialog,color:"primary",icon:"add"},null,8,["onClick"])]),_:1}),l(x,{modelValue:o.showEducationDialog,"onUpdate:modelValue":s[6]||(s[6]=t=>o.showEducationDialog=t)},{default:i(()=>[l(k,{class:"custom-dialog"},{default:i(()=>[l(h,null,{default:i(()=>[ye]),_:1}),l(h,null,{default:i(()=>[l(R,{modelValue:o.education.level,"onUpdate:modelValue":s[0]||(s[0]=t=>o.education.level=t),label:"Level",options:["Primary","Secondary","Tertiary"]},null,8,["modelValue"]),l(d,{modelValue:o.education.institution,"onUpdate:modelValue":s[1]||(s[1]=t=>o.education.institution=t),label:"Institution"},null,8,["modelValue"]),o.education.level==="Tertiary"||o.education.level==="Tertiary"?(m(),c(d,{key:0,modelValue:o.education.course,"onUpdate:modelValue":s[2]||(s[2]=t=>o.education.course=t),label:"Course"},null,8,["modelValue"])):y("",!0),o.education.level==="Secondary"?(m(),c(d,{key:1,modelValue:o.education.course,"onUpdate:modelValue":s[3]||(s[3]=t=>o.education.course=t),label:"Strand (optional for k12)"},null,8,["modelValue"])):y("",!0),o.education.level==="Secondary"||o.education.level==="Tertiary"?(m(),c(d,{key:2,modelValue:o.education.major,"onUpdate:modelValue":s[4]||(s[4]=t=>o.education.major=t),label:"Major (Optional)"},null,8,["modelValue"])):y("",!0),l(d,{modelValue:o.education.period,"onUpdate:modelValue":s[5]||(s[5]=t=>o.education.period=t),label:"Period",rules:[u.periodRule],hint:"example, 2000 to 2009","lazy-rules":""},null,8,["modelValue","rules"])]),_:1}),l(C,{align:"right"},{default:i(()=>[A(l(_,{flat:"",label:"Cancel"},null,512),[[E]]),l(_,{label:"Save",color:"primary",onClick:u.addEducationalAttainment},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(x,{modelValue:o.showWorkDialog,"onUpdate:modelValue":s[13]||(s[13]=t=>o.showWorkDialog=t)},{default:i(()=>[l(k,{class:"custom-dialog"},{default:i(()=>[l(h,null,{default:i(()=>[ve]),_:1}),l(h,null,{default:i(()=>[l(d,{modelValue:o.work.company_name,"onUpdate:modelValue":s[7]||(s[7]=t=>o.work.company_name=t),label:"Company Name"},null,8,["modelValue"]),l(d,{modelValue:o.work.company_address,"onUpdate:modelValue":s[8]||(s[8]=t=>o.work.company_address=t),label:"Company Address"},null,8,["modelValue"]),l(d,{modelValue:o.work.position,"onUpdate:modelValue":s[9]||(s[9]=t=>o.work.position=t),label:"Position"},null,8,["modelValue"]),l(d,{modelValue:o.work.start_date,"onUpdate:modelValue":s[10]||(s[10]=t=>o.work.start_date=t),label:"Start Date",type:"date"},null,8,["modelValue"]),l(d,{modelValue:o.work.end_date,"onUpdate:modelValue":s[11]||(s[11]=t=>o.work.end_date=t),label:"End Date",type:"date"},null,8,["modelValue"]),l(d,{modelValue:o.work.job_description,"onUpdate:modelValue":s[12]||(s[12]=t=>o.work.job_description=t),label:"Job Description",type:"textarea"},null,8,["modelValue"])]),_:1}),l(C,{align:"right"},{default:i(()=>[A(l(_,{flat:"",label:"Cancel"},null,512),[[E]]),l(_,{label:"Save",color:"primary",onClick:u.addWorkExperience},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(m(),c(U,{key:1,onResumeSaved:u.handleResumeSaved},null,8,["onResumeSaved"]))]),_:1})}var ro=B(I,[["render",fe]]);export{ro as default};
