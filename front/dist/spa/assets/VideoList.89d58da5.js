import{Q as u}from"./QBtn.13c9c28e.js";import{Q as f}from"./QPage.27869402.js";import{_ as p,k as t,v as h,m as _,l as d,s as c,p as r,F as b,q as y,d as k,u as m,a4 as g,a5 as V}from"./index.d4268c22.js";import"./QIcon.183e8fa8.js";import"./use-size.fd56a178.js";import"./render.d29caea9.js";import"./QSpinner.54ae2b08.js";import"./dom.e83c55c8.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";const w={data(){return{videos:[],isMobile:!1,scrollAmount:0,isVideoEnlarged:!1,currentVideo:null}},mounted(){this.fetchVideos(),this.checkMobile(),this.isMobile&&this.$refs.videoList.addEventListener("scroll",this.onScroll)},beforeDestroy(){this.isMobile&&this.$refs.videoList.removeEventListener("scroll",this.onScroll)},methods:{fetchVideos(){const e="https://backend.ppark.online/api";this.$axios.get(`${e}/user-videos`,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token_applicant")}`}}).then(o=>{this.videos=o.data,!this.isMobile&&this.videos.length>0&&this.autoplayFirstVideo()}).catch(o=>{console.error("Error fetching videos:",o)})},getYouTubeEmbedLink(e,o=!1){const s=this.extractYouTubeVideoId(e);return s?`https://www.youtube.com/embed/${s}${o?"?autoplay=1":""}`:""},extractYouTubeVideoId(e){if(!e)return null;const o=e.match(/[?&]v=([^&]+)/);return o?o[1]:null},autoplayFirstVideo(){if(this.videos.length>0){const e=this.videos[0].id,o=document.getElementById(`video-${e}`);o.src+="?autoplay=1"}},checkMobile(){this.isMobile=/Mobi|Android/i.test(navigator.userAgent)},slideNext(){const e=this.$refs.videoList,s=e.children[0].offsetWidth,l=this.scrollAmount+s;l<e.scrollWidth&&(this.scrollAmount=l,e.scrollTo({left:this.scrollAmount,behavior:"smooth"}))},slidePrev(){const e=this.$refs.videoList,s=e.children[0].offsetWidth,l=this.scrollAmount-s;l>=0&&(this.scrollAmount=l,e.scrollTo({left:this.scrollAmount,behavior:"smooth"}))},enlargeVideo(e){this.currentVideo=this.videos.find(o=>o.id===e),this.currentVideo&&(this.isVideoEnlarged=!0)},pauseAllVideos(){document.querySelectorAll("iframe").forEach(o=>{const s=o.src;o.src="",o.src=s})},onScroll(){this.pauseAllVideos()}}},A=e=>(g("data-v-5fa5430e"),e=e(),V(),e),x=A(()=>r("h3",{class:"is-NotMobile-test",style:{"font-weight":"600"}},"My Videos",-1)),L={key:0},M={key:1,class:"video-wrapper"},E={class:"video-list",ref:"videoList"},C=["id","src"],S={class:""},I={key:0,class:"video-info",style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}},B={class:"video-title"},N={class:"video-description"},T={key:2,class:"enlarged-view"},W=["src"];function Y(e,o,s,l,i,a){return t(),h(f,{padding:""},{default:_(()=>[x,i.videos.length===0?(t(),d("div",L,"No videos available")):c("",!0),i.isVideoEnlarged?c("",!0):(t(),d("div",M,[!i.isMobile&&i.scrollAmount>0?(t(),h(u,{key:0,class:"prev-button q-mt-md",icon:"arrow_back",onClick:a.slidePrev,round:"",dense:"",flat:"",size:"1.5em",color:"primary"},null,8,["onClick"])):c("",!0),r("div",E,[(t(!0),d(b,null,y(i.videos,(n,v)=>(t(),d("div",{class:"video-container",key:n.id},[r("iframe",{id:"video-"+n.id,src:a.getYouTubeEmbedLink(n.youtube_link,i.isMobile&&v===0),class:"video-frame",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,C),r("div",S,[i.isMobile?c("",!0):(t(),d("div",I,[r("div",null,[r("div",B,m(n.title),1),r("div",N,m(n.description),1)]),r("div",null,[i.isMobile?c("",!0):(t(),h(u,{key:0,label:"Play",push:"","text-color":"primary",onClick:q=>a.enlargeVideo(n.id),color:"white",icon:"play_circle"},null,8,["onClick"]))])]))])]))),128))],512),i.isMobile?c("",!0):(t(),h(u,{key:1,class:"next-button q-mt-md",icon:"arrow_forward",onClick:a.slideNext,round:"",dense:"",flat:"",color:"primary",size:"1.5em"},null,8,["onClick"]))])),i.isVideoEnlarged?(t(),d("div",T,[k(u,{class:"back-button",icon:"arrow_back",onClick:o[0]||(o[0]=n=>i.isVideoEnlarged=!1),label:"Back","text-color":"primary",color:"white"}),r("iframe",{src:a.getYouTubeEmbedLink(i.currentVideo.youtube_link,!0),class:"enlarged-video-frame",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:""},null,8,W)])):c("",!0)]),_:1})}var K=p(w,[["render",Y],["__scopeId","data-v-5fa5430e"]]);export{K as default};
