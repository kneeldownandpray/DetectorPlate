import{Q as p}from"./QCardSection.47b479df.js";import{Q as l}from"./QInput.98ef1ce8.js";import{Q as u}from"./QBtn.13c9c28e.js";import{Q as b}from"./QForm.280c210b.js";import{Q as f}from"./QBanner.aa02c22c.js";import{Q as w}from"./QCard.cdee3ee2.js";import{Q as P}from"./QPage.27869402.js";import{Q as V,a as v}from"./QLayout.495b6a5b.js";import{_ as Q,j as q,k as o,v as d,m as a,d as r,y as g,av as S,p as i,l as h,t as c,u as n,s as y,a4 as C,a5 as _}from"./index.d4268c22.js";import{a as $}from"./axios.ab682c6b.js";import"./render.d29caea9.js";import"./use-key-composition.3398aa85.js";import"./QIcon.183e8fa8.js";import"./use-size.fd56a178.js";import"./QSpinner.54ae2b08.js";import"./uid.937d8ee7.js";import"./use-dark.57e59592.js";import"./focus-manager.7cc6c8df.js";import"./private.use-form.445d09d5.js";import"./dom.e83c55c8.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";import"./scroll.8fea1542.js";import"./QResizeObserver.85bfe230.js";const B="https://backend.ppark.online/api",z=q({name:"ResetPasswordPage",data(){return{email:"",token:"",password:"",password_confirmation:"",message:"",success:!1,passwordVisible:!1}},computed:{strengthMessage(){return this.passwordStrength(this.password)},strengthColor(){const e=this.strengthMessage;return e==="Strong"?"green":e==="Weak"?"orange":"red"}},mounted(){const e=new URLSearchParams(window.location.search);this.email=e.get("email")||"",this.token=e.get("token")||""},methods:{async resetPassword(){try{const e=await $.post(`${B}/reset-password`,{email:this.email,token:this.token,password:this.password,password_confirmation:this.password_confirmation});this.message=e.data.message,this.success=!0,alert(this.message),alert("Please Login Again"),this.$router.push("/login")}catch(e){e.response?(this.message=e.response.data.message,this.success=!1):(this.message="An error occurred. Please try again.",this.success=!1)}},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},passwordStrength(e){const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,}$/,m=/^(?=.*[a-z]).{6,}$/;return t.test(e)?"Strong":m.test(e)?"Weak":"Very Weak"}}}),k=e=>(C("data-v-277084b5"),e=e(),_(),e),R=k(()=>i("div",{class:"text-center q-pt-lg"},null,-1)),U=k(()=>i("div",{class:"q-mb-md text-h4",style:{"font-weight":"500",color:"#293041"}},"Reset Password",-1)),I={style:{display:"flex",width:"100%"}},N={key:0,class:"q-mt-md"};function M(e,t,m,A,E,L){return o(),d(V,null,{default:a(()=>[r(v,null,{default:a(()=>[r(P,{class:"flex bg-image flex-center"},{default:a(()=>[r(w,{style:g(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:a(()=>[r(w,null,{default:a(()=>[r(p,null,{default:a(()=>[R]),_:1}),r(p,null,{default:a(()=>[U,r(b,{onSubmit:S(e.resetPassword,["prevent"])},{default:a(()=>[r(l,{filled:"",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=s=>e.email=s),label:"Email",type:"email",required:"","lazy-rules":"",rules:[s=>!!s||"Email is required"],disable:""},null,8,["modelValue","rules"]),r(l,{filled:"",modelValue:e.token,"onUpdate:modelValue":t[1]||(t[1]=s=>e.token=s),label:"Token",required:"","lazy-rules":"",rules:[s=>!!s||"Token is required"],disable:""},null,8,["modelValue","rules"]),i("div",I,[r(l,{style:{width:"100%"},filled:"",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=s=>e.password=s),label:"New Password",type:e.passwordVisible?"text":"password",required:"",rules:[s=>!!s||"Password is required",e.passwordStrength]},null,8,["modelValue","type","rules"]),r(u,{style:{"background-color":"#f2f2f2",height:"55px"},dense:"",icon:e.passwordVisible?"visibility_off":"visibility",size:"15px",class:"q-pa-md q-ml-sm",onClick:e.togglePasswordVisibility},null,8,["icon","onClick"])]),r(l,{filled:"",modelValue:e.password_confirmation,"onUpdate:modelValue":t[3]||(t[3]=s=>e.password_confirmation=s),label:"Confirm Password",type:e.passwordVisible?"text":"password",required:"",rules:[s=>!!s||"Confirmation is required",s=>s===e.password||"Passwords do not match"]},null,8,["modelValue","type","rules"]),r(u,{type:"submit",onClick:t[4]||(t[4]=s=>e.resetPassword()),label:"Reset Password",color:"primary",class:"full-width"})]),_:1},8,["onSubmit"]),e.message?(o(),h("div",N,[e.success?(o(),d(f,{key:0,color:"green"},{default:a(()=>[c(n(e.message),1)]),_:1})):(o(),d(f,{key:1,color:"red"},{default:a(()=>[c(n(e.message),1)]),_:1}))])):y("",!0),e.password?(o(),h("div",{key:1,class:"password-strength q-mt-md",style:g({color:e.strengthColor})},[i("p",null,"Password Strength: "+n(e.strengthMessage),1)],4)):y("",!0)]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var me=Q(z,[["render",M],["__scopeId","data-v-277084b5"]]);export{me as default};
