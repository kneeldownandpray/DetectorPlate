import{Q as i}from"./QCardSection.47b479df.js";import{b as D,Q as g}from"./QSelect.4738bd2c.js";import{Q as C,a as d}from"./QTr.f384a134.js";import{Q as p}from"./QBtn.13c9c28e.js";import{Q as h}from"./QTable.f863bf4e.js";import{Q as u}from"./QCard.cdee3ee2.js";import{Q as y}from"./QPage.27869402.js";import{a as _}from"./axios.ab682c6b.js";import{C as k}from"./ControllerData.7a69b183.js";import{_ as b,k as m,v as c,m as t,O as w,d as e,y as Q,l as V,q as v,F as x,p as B,t as R,u as S}from"./index.d4268c22.js";import"./render.d29caea9.js";import"./use-key-composition.3398aa85.js";import"./QIcon.183e8fa8.js";import"./use-size.fd56a178.js";import"./QSpinner.54ae2b08.js";import"./uid.937d8ee7.js";import"./use-dark.57e59592.js";import"./focus-manager.7cc6c8df.js";import"./QChip.99126795.js";import"./QItem.fbffd16a.js";import"./use-router-link.7ecbec49.js";import"./vm.bd5b438f.js";import"./QItemLabel.6ae2f278.js";import"./position-engine.9300da22.js";import"./selection.34842c42.js";import"./scroll.8fea1542.js";import"./dom.e83c55c8.js";import"./use-model-toggle.833413c1.js";import"./use-tick.0d5c2332.js";import"./use-timeout.d19f8495.js";import"./use-prevent-scroll.61e86cc2.js";import"./rtl.276c3f1b.js";import"./private.use-form.445d09d5.js";import"./format.054b8074.js";import"./QSeparator.1100b827.js";import"./QList.f1e6330b.js";import"./QMarkupTable.7032e167.js";import"./QCheckbox.4be7c549.js";import"./use-render-cache.3aae9b27.js";import"./QInput.98ef1ce8.js";import"./QImg.3e0c5a33.js";import"./QCardActions.78dd0818.js";const T={components:{ControllerData:k},data(){return{selectedDays:100,dayOptions:[7,14,30,60,100,500,700,1e3],reportData:[],loading:!1,showControllerDataDialog:!1,selectedDate:null}},mounted(){this.fetchDailyReport()},computed:{reversedReportData(){return[...this.reportData].reverse()},columns(){return[{name:"date",label:"Date",align:"left",field:"date"},{name:"inCount",label:"IN",align:"center",field:"inCount"},{name:"outCount",label:"OUT",align:"center",field:"outCount"},{name:"visitor",label:"Visitor",align:"center",field:"visitor"},{name:"park",label:"Park",align:"center",field:"park"},{name:"unknown",label:"Unknown",align:"center",field:"unknown"},{name:"actions",label:"Actions",align:"center"}]}},methods:{async fetchDailyReport(){this.loading=!0;try{const l=localStorage.getItem("access_token_employer"),r=await _.get(`https://backend.ppark.online/api/vehicle-records/report/daily?days=${this.selectedDays}`,{headers:{Authorization:`Bearer ${l}`}});this.reportData=r.data.report}catch(l){console.error("Error fetching report:",l)}finally{this.loading=!1}},openControllerData(l){this.selectedDate=l,this.showControllerDataDialog=!0},closeControllerDataDialog(){this.showControllerDataDialog=!1}}},U=B("div",{class:"text-h6"},"Daily Vehicle Report",-1);function z(l,r,I,N,a,n){const f=w("ControllerData",!0);return m(),c(y,{padding:""},{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[U]),_:1}),e(i,{class:"q-gutter-md"},{default:t(()=>[e(D,{modelValue:a.selectedDays,"onUpdate:modelValue":[r[0]||(r[0]=o=>a.selectedDays=o),n.fetchDailyReport],options:a.dayOptions,label:"Select Days",outlined:"",dense:""},null,8,["modelValue","options","onUpdate:modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(h,{flat:"",bordered:"",rows:n.reversedReportData,columns:n.columns,"row-key":"date",loading:a.loading},{body:t(o=>[e(C,{props:o,style:Q(o.rowIndex===0?"background-color: lightblue;":"")},{default:t(()=>[(m(!0),V(x,null,v(n.columns,s=>(m(),c(d,{key:s.name},{default:t(()=>[R(S(o.row[s.field]),1)]),_:2},1024))),128)),e(d,null,{default:t(()=>[e(p,{label:"Views",color:"primary",dense:"",onClick:s=>n.openControllerData(o.row.date)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props","style"])]),_:1},8,["rows","columns","loading"])]),_:1})]),_:1}),e(g,{modelValue:a.showControllerDataDialog,"onUpdate:modelValue":r[1]||(r[1]=o=>a.showControllerDataDialog=o),persistent:!0,maximized:!0,style:{zIndex:"11111"}},{default:t(()=>[e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[e(p,{color:"red",label:"Close",onClick:n.closeControllerDataDialog},null,8,["onClick"])]),_:1}),e(i,null,{default:t(()=>[e(f,{date2:this.selectedDate},null,8,["date2"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Qe=b(T,[["render",z]]);export{Qe as default};
