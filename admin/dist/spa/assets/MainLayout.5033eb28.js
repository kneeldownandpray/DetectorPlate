import{Q}from"./QCardSection.d27bd26a.js";import{R as C,Q as d}from"./QBtn.ff85a6ff.js";import{Q as L}from"./QCard.c79eb86a.js";import{Q as M}from"./QDialog.c9516741.js";import{Q as B,a as V}from"./QHeader.9427604c.js";import{Q as x}from"./QSpace.fd408900.js";import{Q as h}from"./QIcon.6a1c506e.js";import{Q as O}from"./QBadge.08db2bc9.js";import{Q as q}from"./QAvatar.3d11c645.js";import{Q as U}from"./QToolbar.5995c575.js";import{Q as j}from"./QImg.4ff1e9db.js";import{Q as n,a as _}from"./QItem.79ca4c2d.js";import{Q as c}from"./QItemLabel.c51f45b8.js";import{Q as D}from"./QList.3fa3315d.js";import{Q as z,a as F}from"./QDrawer.6f100367.js";import{Q as E,a as N}from"./QLayout.32b67695.js";import{j as A,_ as k,k as s,v as f,m as t,d as e,s as v,t as l,u,l as b,F as $,q as P,I as R,p as m,O as T}from"./index.ccc655a8.js";import{a as S}from"./axios.ab682c6b.js";import"./render.31dc14a1.js";import"./QSpinner.ad1652ab.js";import"./use-size.e5fcccbb.js";import"./dom.ab32582f.js";import"./use-router-link.f3c58062.js";import"./vm.bd5b438f.js";import"./use-dark.fcf957f9.js";import"./use-prevent-scroll.89277a0f.js";import"./scroll.3a45a3c7.js";import"./use-timeout.1142a48a.js";import"./use-tick.280905b1.js";import"./use-portal.887f479b.js";import"./focus-manager.7cc6c8df.js";import"./QResizeObserver.4550105b.js";import"./QSlideTransition.86cb336c.js";import"./QSeparator.1b7512a0.js";import"./use-id.51f80acb.js";import"./uid.937d8ee7.js";import"./TouchPan.f5a64592.js";import"./touch.9135741d.js";import"./selection.1b9d0d65.js";import"./format.2cae61da.js";import"./QScrollObserver.72b956c6.js";const H=A({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});function W(a,o,y,w,r,g){return s(),f(_,{clickable:"",tag:"a",target:"_blank",href:a.link},{default:t(()=>[a.icon?(s(),f(n,{key:0,avatar:""},{default:t(()=>[e(h,{name:a.icon},null,8,["name"])]),_:1})):v("",!0),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l(u(a.title),1)]),_:1}),e(c,{caption:""},{default:t(()=>[l(u(a.caption),1)]),_:1})]),_:1})]),_:1},8,["href"])}var G=k(H,[["render",W]]);const J=A({name:"Messages",setup(){return{messages:[{id:5,name:"Pratik Patel",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://avatars2.githubusercontent.com/u/34883558?s=400&v=4",time:"10:42 PM"},{id:6,name:"Winfield Stapforth",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/img/avatar6.jpg",time:"11:17 AM"},{id:1,name:"Boy",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/img/boy-avatar.png",time:"5:17 AM"},{id:2,name:"Jeff Galbraith",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/team/jeff_galbraith.jpg",time:"5:17 AM"},{id:3,name:"Razvan Stoenescu",msg:` -- I'll be in your neighborhood doing errands this
            weekend. Do you want to grab brunch?`,avatar:"https://cdn.quasar.dev/team/razvan_stoenescu.jpeg",time:"5:17 AM"}]}}}),K=["src"];function X(a,o,y,w,r,g){return s(),b("div",null,[(s(!0),b($,null,P(a.messages,i=>R((s(),f(_,{style:{"max-width":"420px"},key:i.id,clickable:""},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(q,null,{default:t(()=>[m("img",{src:i.avatar},null,8,K)]),_:2},1024)]),_:2},1024),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l(u(i.name),1)]),_:2},1024),e(c,{caption:"",lines:"1"},{default:t(()=>[l(u(i.msg),1)]),_:2},1024)]),_:2},1024),e(n,{side:""},{default:t(()=>[l(u(i.time),1)]),_:2},1024)]),_:2},1024)),[[C]])),128))])}var Y=k(J,[["render",X]]),Z="/assets/SSS.19084230.png";const I="https://backend.parkease.online/api",ee={name:"MainLayout",components:{EssentialLink:G,Messages:Y},created(){},data(){return{leftDrawerOpen:!1,first_name:"",account_request:null,user:null,pollingInterval:null,deleteDialog:!1}},computed:{drawerStatus(){return this.leftDrawerOpen?"Open":"Closed"}},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},handleLogout(){localStorage.removeItem("access_token"),localStorage.removeItem("user_data"),this.$router.push("/login")},async fetchUserData(){try{const a=localStorage.getItem("access_token"),o=await S.get(`${I}/shortpolling`,{headers:{Authorization:`Bearer ${a}`}});this.user=o.data,this.first_name=this.user.first_name}catch(a){console.error("Failed to fetch user data:",a)}this.displayCountAccept()},async displayCountAccept(){try{const a=localStorage.getItem("access_token"),o=await S.get(`${I}/counter/status-one`,{headers:{Authorization:`Bearer ${a}`}});this.account_request=o.data}catch(a){console.error("Failed to fetch user data:",a)}}},mounted(){this.fetchUserData()},beforeUnmount(){this.pollingInterval&&clearInterval(this.pollingInterval)},watch:{}},te=m("div",{class:"text-h6"},"Socket.io",-1),ae=m("p",null,"Connected and Working Successfully",-1),oe={class:"q-gutter-sm row items-center no-wrap"},re=m("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png"},null,-1),ne={style:{padding:"15px","background-color":"#fff"}};function le(a,o,y,w,r,g){const i=T("router-view");return s(),b($,null,[e(M,{modelValue:r.deleteDialog,"onUpdate:modelValue":o[1]||(o[1]=p=>r.deleteDialog=p)},{default:t(()=>[e(L,null,{default:t(()=>[e(Q,{class:"header-format-w"},{default:t(()=>[te,ae]),_:1}),e(Q,null,{default:t(()=>[e(d,{label:"ok",onClick:o[0]||(o[0]=p=>r.deleteDialog=!1),color:"primary"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{view:"lHh Lpr lFf"},{default:t(()=>[e(B,{elevated:""},{default:t(()=>[e(U,null,{default:t(()=>[e(d,{flat:"",dense:"",round:"",onClick:g.toggleLeftDrawer,icon:"menu","aria-label":"Menu"},null,8,["onClick"]),e(V,null,{default:t(()=>[l(u(this.first_name),1)]),_:1}),e(x),m("div",oe,[a.$q.screen.gt.sm?(s(),f(d,{key:0,round:"",dense:"",flat:"",color:"white",icon:a.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",onClick:o[2]||(o[2]=p=>a.$q.fullscreen.toggle())},null,8,["icon"])):v("",!0),e(d,{round:"",dense:"",flat:"",color:"white",to:"/RequestAccounts"},{default:t(()=>[e(h,{name:"person"}),r.account_request?(s(),f(O,{key:0,color:"red","text-color":"white",floating:""},{default:t(()=>[l(u(r.account_request),1)]),_:1})):v("",!0)]),_:1}),e(d,{round:"",flat:""},{default:t(()=>[e(q,{size:"26px"},{default:t(()=>[re]),_:1})]),_:1}),e(d,{round:"",dense:"",flat:"",color:"white",icon:"logout",onClick:g.handleLogout},null,8,["onClick"])])]),_:1})]),_:1}),e(z,{modelValue:r.leftDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=p=>r.leftDrawerOpen=p),"show-if-above":"",bordered:"",class:"bg-primary text-white"},{default:t(()=>[e(D,null,{default:t(()=>[m("div",ne,[e(j,{src:Z})]),e(F,{icon:"account_circle",label:"Accounts"},{default:t(()=>[e(D,{class:"q-pl-lg"},{default:t(()=>[e(_,{to:"/AllAccounts","active-class":"q-item-no-link-highlighting"},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(h,{name:"list"})]),_:1}),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l("All Accounts")]),_:1})]),_:1})]),_:1}),e(_,{to:"/SchoolAccounts","active-class":"q-item-no-link-highlighting"},{default:t(()=>[e(n,{avatar:""},{default:t(()=>[e(h,{name:"person"})]),_:1}),e(n,null,{default:t(()=>[e(c,null,{default:t(()=>[l("Schools Accounts")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{class:"bg-grey-2"},{default:t(()=>[e(i)]),_:1})]),_:1})],64)}var Ge=k(ee,[["render",le]]);export{Ge as default};
