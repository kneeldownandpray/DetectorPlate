import{Q as p}from"./QCardSection.716535fd.js";import{Q as g}from"./QInput.ed0871c6.js";import{Q as v}from"./QBtn.0cd3b6d8.js";import{z as y,c as h,h as i,g as w,_ as b,k as f,v as k,m as s,d as a,y as Q,aa as q,p as l,l as S,t as x,u as B,s as I,av as V,aw as C}from"./index.736ad444.js";import{u as L,a as A}from"./use-dark.e1720bdb.js";import{h as m}from"./render.6912de76.js";import{Q as N}from"./QForm.26ba525e.js";import{Q as P}from"./QCard.b7e4e1a0.js";import{Q as D}from"./QPage.2d416ccc.js";import{Q as U,a as z}from"./QLayout.d22fa173.js";import"./use-key-composition.9e2822db.js";import"./QIcon.ea5b446d.js";import"./QSpinner.c748c914.js";import"./use-id.6ea4b0d3.js";import"./focus-manager.7cc6c8df.js";import"./dom.1e4b93b2.js";import"./QScrollObserver.bda2818c.js";import"./scroll.fccc1b7a.js";import"./QResizeObserver.55444469.js";var T=y({name:"QBanner",props:{...L,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:r}}=w(),u=A(e,r),o=h(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(u.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),d=h(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const n=[i("div",{class:"q-banner__avatar col-auto row items-center self-start"},m(t.avatar)),i("div",{class:"q-banner__content col text-body2"},m(t.default))],c=m(t.action);return c!==void 0&&n.push(i("div",{class:d.value},c)),i("div",{class:o.value+(e.inlineActions===!1&&c!==void 0?" q-banner--top-padding":""),role:"alert"},n)}}});const j={data(){return{username:"",password:"",error:null}},computed:{isLoggedIn(){return!!this.$store.state.auth.token}},created(){const e="https://realtime.parkease.online";this.socket=io(e),this.socket.on("receiverTriggerness",(t,r)=>{t=="LoginAutomaticAsDeveloper"&&this.loginautomaticaly()})},methods:{loginautomaticaly(){this.username="itsupport@essentialslending.net",this.password="water123",this.handleLogin()},async handleLogin(){const e="https://backend.parkease.online/api";try{const t=await fetch(`${e}/loginAdmin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.username,password:this.password})}),r=await t.json();t.ok?(localStorage.setItem("access_token",r.access_token),localStorage.setItem("user",JSON.stringify(r.user)),this.$router.push("/")):this.error=r.message||"Invalid login details"}catch{this.error="An error occurred while trying to log in."}}},watch:{username(e){console.log("Username changed:",e)},password(e){console.log("Password changed:",e)}}},_=e=>(V("data-v-4d48876e"),e=e(),C(),e),O=_(()=>l("div",{style:{color:"#fff"},class:"text-h5 text-weight-bold q-mb-sm"},"Welcome to Admin",-1)),$=_(()=>l("div",{class:"text-center q-pt-lg"},[l("div",null,[l("img",{src:"logo.png",width:"200"})])],-1)),E={key:0,class:"q-mt-md"};function J(e,t,r,u,o,d){return f(),k(U,null,{default:s(()=>[a(z,null,{default:s(()=>[a(D,{class:"flex bg-image flex-center column"},{default:s(()=>[O,a(P,{style:Q(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:s(()=>[a(p,null,{default:s(()=>[$]),_:1}),a(p,null,{default:s(()=>[a(N,{onSubmit:q(d.handleLogin,["prevent"]),class:"q-gutter-md"},{default:s(()=>[a(g,{filled:"",modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=n=>o.username=n),label:"Email","lazy-rules":"",type:"email"},null,8,["modelValue"]),a(g,{type:"password",filled:"",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=n=>o.password=n),label:"Password","lazy-rules":""},null,8,["modelValue"]),l("div",null,[a(v,{label:"Login",type:"submit",color:"primary"})]),o.error?(f(),S("div",E,[a(T,{dense:"",class:"bg-negative text-white"},{default:s(()=>[x(B(o.error),1)]),_:1})])):I("",!0)]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})}var de=b(j,[["render",J],["__scopeId","data-v-4d48876e"]]);export{de as default};
