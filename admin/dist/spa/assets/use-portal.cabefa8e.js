import{b as q,g as P}from"./QBtn.0cd3b6d8.js";import{w as M,o as w,g as y,Z as T,c as C,z as A,r as F,a as D,a5 as H,h as Q,a6 as G,a7 as U,a8 as _}from"./index.736ad444.js";import{r as S,b as j}from"./focus-manager.7cc6c8df.js";const k={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},x=["beforeShow","show","beforeHide","hide"];function z({showing:e,canShow:l,hideOnRouteChange:r,handleShow:u,handleHide:o,processOnMount:f}){const i=y(),{props:a,emit:n,proxy:m}=i;let s;function c(t){e.value===!0?b(t):p(t)}function p(t){if(a.disable===!0||t!==void 0&&t.qAnchorHandled===!0||l!==void 0&&l(t)!==!0)return;const d=a["onUpdate:modelValue"]!==void 0;d===!0&&(n("update:modelValue",!0),s=t,T(()=>{s===t&&(s=void 0)})),(a.modelValue===null||d===!1)&&g(t)}function g(t){e.value!==!0&&(e.value=!0,n("beforeShow",t),u!==void 0?u(t):n("show",t))}function b(t){if(a.disable===!0)return;const d=a["onUpdate:modelValue"]!==void 0;d===!0&&(n("update:modelValue",!1),s=t,T(()=>{s===t&&(s=void 0)})),(a.modelValue===null||d===!1)&&h(t)}function h(t){e.value!==!1&&(e.value=!1,n("beforeHide",t),o!==void 0?o(t):n("hide",t))}function $(t){a.disable===!0&&t===!0?a["onUpdate:modelValue"]!==void 0&&n("update:modelValue",!1):t===!0!==e.value&&(t===!0?g:h)(s)}M(()=>a.modelValue,$),r!==void 0&&q(i)===!0&&M(()=>m.$route.fullPath,()=>{r.value===!0&&e.value===!0&&b()}),f===!0&&w(()=>{$(a.modelValue)});const V={show:p,hide:b,toggle:c};return Object.assign(m,V),V}const B={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function L(e,l=()=>{},r=()=>{}){return{transitionProps:C(()=>{const u=`q-transition--${e.transitionShow||l()}`,o=`q-transition--${e.transitionHide||r()}`;return{appear:!0,enterFromClass:`${u}-enter-from`,enterActiveClass:`${u}-enter-active`,enterToClass:`${u}-enter-to`,leaveFromClass:`${o}-leave-from`,leaveActiveClass:`${o}-leave-active`,leaveToClass:`${o}-leave-to`}}),transitionStyle:C(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const v=[];function Z(e,l){do{if(e.$options.name==="QMenu"){if(e.hide(l),e.$props.separateClosePopup===!0)return P(e)}else if(e.__qPortal===!0){const r=P(e);return r!==void 0&&r.$options.name==="QPopupProxy"?(e.hide(l),r):e}e=P(e)}while(e!=null)}const E=A({name:"QPortal",setup(e,{slots:l}){return()=>l.default()}});function I(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function J(e,l,r,u){const o=F(!1),f=F(!1);let i=null;const a={},n=u==="dialog"&&I(e);function m(c){if(c===!0){S(a),f.value=!0;return}f.value=!1,o.value===!1&&(n===!1&&i===null&&(i=U(!1,u)),o.value=!0,v.push(e.proxy),j(a))}function s(c){if(f.value=!1,c!==!0)return;S(a),o.value=!1;const p=v.indexOf(e.proxy);p!==-1&&v.splice(p,1),i!==null&&(_(i),i=null)}return D(()=>{s(!0)}),e.proxy.__qPortal=!0,H(e.proxy,"contentEl",()=>l.value),{showPortal:m,hidePortal:s,portalIsActive:o,portalIsAccessible:f,renderPortal:()=>n===!0?r():o.value===!0?[Q(G,{to:i},Q(E,r))]:void 0}}export{B as a,x as b,L as c,J as d,z as e,Z as f,v as p,k as u};
