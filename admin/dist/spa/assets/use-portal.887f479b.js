import{v as F,g as P}from"./vm.bd5b438f.js";import{w as M,o as S,g as _,W as T,c as C,z as A,r as Q,a as D,a2 as H,h as q,a3 as E,a4 as G,a5 as U}from"./index.ccc655a8.js";import{r as w,b as j}from"./focus-manager.7cc6c8df.js";const B={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},L=["beforeShow","show","beforeHide","hide"];function J({showing:e,canShow:a,hideOnRouteChange:o,handleShow:u,handleHide:n,processOnMount:f}){const i=_(),{props:l,emit:r,proxy:m}=i;let s;function c(t){e.value===!0?g(t):p(t)}function p(t){if(l.disable===!0||t!==void 0&&t.qAnchorHandled===!0||a!==void 0&&a(t)!==!0)return;const d=l["onUpdate:modelValue"]!==void 0;d===!0&&(r("update:modelValue",!0),s=t,T(()=>{s===t&&(s=void 0)})),(l.modelValue===null||d===!1)&&v(t)}function v(t){e.value!==!0&&(e.value=!0,r("beforeShow",t),u!==void 0?u(t):r("show",t))}function g(t){if(l.disable===!0)return;const d=l["onUpdate:modelValue"]!==void 0;d===!0&&(r("update:modelValue",!1),s=t,T(()=>{s===t&&(s=void 0)})),(l.modelValue===null||d===!1)&&h(t)}function h(t){e.value!==!1&&(e.value=!1,r("beforeHide",t),n!==void 0?n(t):r("hide",t))}function $(t){l.disable===!0&&t===!0?l["onUpdate:modelValue"]!==void 0&&r("update:modelValue",!1):t===!0!==e.value&&(t===!0?v:h)(s)}M(()=>l.modelValue,$),o!==void 0&&F(i)===!0&&M(()=>m.$route.fullPath,()=>{o.value===!0&&e.value===!0&&g()}),f===!0&&S(()=>{$(l.modelValue)});const V={show:p,hide:g,toggle:c};return Object.assign(m,V),V}const K={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function R(e,a=()=>{},o=()=>{}){return{transitionProps:C(()=>{const u=`q-transition--${e.transitionShow||a()}`,n=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${u}-enter-from`,enterActiveClass:`${u}-enter-active`,enterToClass:`${u}-enter-to`,leaveFromClass:`${n}-leave-from`,leaveActiveClass:`${n}-leave-active`,leaveToClass:`${n}-leave-to`}}),transitionStyle:C(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const b=[];function X(e){return b.find(a=>a.contentEl!==null&&a.contentEl.contains(e))}function I(e,a){do{if(e.$options.name==="QMenu"){if(e.hide(a),e.$props.separateClosePopup===!0)return P(e)}else if(e.__qPortal===!0){const o=P(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(a),o):e}e=P(e)}while(e!=null)}function Y(e,a,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=I(e,a);continue}e.hide(a)}e=P(e)}}const N=A({name:"QPortal",setup(e,{slots:a}){return()=>a.default()}});function O(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Z(e,a,o,u){const n=Q(!1),f=Q(!1);let i=null;const l={},r=u==="dialog"&&O(e);function m(c){if(c===!0){w(l),f.value=!0;return}f.value=!1,n.value===!1&&(r===!1&&i===null&&(i=G(!1,u)),n.value=!0,b.push(e.proxy),j(l))}function s(c){if(f.value=!1,c!==!0)return;w(l),n.value=!1;const p=b.indexOf(e.proxy);p!==-1&&b.splice(p,1),i!==null&&(U(i),i=null)}return D(()=>{s(!0)}),e.proxy.__qPortal=!0,H(e.proxy,"contentEl",()=>a.value),{showPortal:m,hidePortal:s,portalIsActive:n,portalIsAccessible:f,renderPortal:()=>r===!0?o():n.value===!0?[q(E,{to:i},q(N,o))]:void 0}}export{K as a,L as b,R as c,Z as d,J as e,I as f,X as g,Y as h,b as p,B as u};
